<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../FrostUI/dist/frost-ui.css">
    <link rel="stylesheet" href="dist/frost-ui-selectmenu.css">
    <script src="../FrostUI/dist/frost-ui-bundle.js"></script>
    <script src="dist/frost-ui-selectmenu.js"></script>
</head>

<body>
    <div class="container pt-5">
        <div class="mb-4">
            <label for="selectDefault">Default</label>
            <div class="form-input">
                <select name="selectMulti[]" class="input-filled" type="text" id="selectDefault" multiple>
                </select>
                <div class="ripple-line"></div>
            </div>
        </div>
        <div class="mb-4">
            <label for="reference">Reference</label>
            <div class="form-input">
                <input class="input-filled" type="text" id="reference" placeholder="Reference" />
                <div class="ripple-line"></div>
            </div>
        </div>
    </div>
    <script>
        const selectDefault = dom.findOne('#selectDefault');

        const selectMenu = UI.SelectMenu.init(selectDefault, {
            getResults: options => {
                let timer, outerReject;
                const request = new Promise((resolve, reject) => {
                    const data = new Array(20).fill().map((_, i) => {
                        const num = i + 1 + (options.offset ? options.offset : 0);
                        return {
                            value: num,
                            text: `Test ${num}`
                        };
                    });
                    const results = data.filter(result =>
                        !options.term || result.text.toLowerCase().indexOf(options.term.toLowerCase()) >= 0
                    );
                    timer = setTimeout(
                        _ => {
                            resolve({ results, showMore: true });
                        },
                        1000
                    );
                    outerReject = reject;
                });
                request.cancel = _ => {
                    clearTimeout(timer);
                    outerReject();
                };
                return request;
            },
            allowClear: true,
            maxSelect: 1
        });
        console.log(selectMenu);
    </script>
</body>

</html>