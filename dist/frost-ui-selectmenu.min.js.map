{"version":3,"names":["SelectMenu","BaseComponent","constructor","node","options","super","$","is","this","_node","Error","data","value","_placeholderText","_options","placeholder","_maxSelections","maxSelections","_multiple","getProperty","_data","_lookup","_activeItems","_getData","_isFunction","getResults","_getResultsInit","_isPlainObject","_getDataFromObject","_isArray","_getDataFromDOM","_parseData","_parseDataLookup","_getDataInit","selectedOptions","map","option","getValue","_render","_loadValue","_events","disable","setAttribute","disabled","_refreshDisabled","dispose","_popper","removeAttribute","removeEvent","removeClass","classes","hide","remove","_menuNode","_toggle","_clear","_searchInput","_placeholder","_itemsList","_value","_requests","_popperOptions","enable","isConnected","getDataset","triggerOne","setDataset","uiAnimating","_refreshPlaceholder","setValue","fadeOut","duration","then","_","empty","detach","removeDataset","triggerEvent","catch","show","hasAttribute","term","appendTo","append","after","Popper","fadeIn","toggle","update","initComponent","defaults","lang","clear","error","loading","noResults","search","searchInputStyle","renderResult","text","renderSelection","sanitize","input","isMatch","escapedTerm","_escapeRegExp","regExp","RegExp","test","normalized","normalize","replace","sortResults","a","b","aLower","toLowerCase","bLower","diff","indexOf","localeCompare","minSearch","allowClear","closeOnSelect","debounce","maxHeight","fullWidth","placement","position","fixed","spacing","minContact","active","disabledItem","focus","group","groupContainer","info","item","items","menu","multiClear","multiClearIcon","multiGroup","multiItem","multiSearchInput","multiToggle","readonly","searchContainer","searchInputFilled","searchInputOutline","searchInputRipple","searchOuter","selectionSingle","proto","prototype","_cloneItem","_findValue","getMaxSelections","getPlaceholder","setMaxSelections","_refresh","setPlaceholder","_renderPlaceholder","_buildOption","create","properties","selected","element","_extend","addEvent","e","preventDefault","isSame","target","stopPropagation","document","activeElement","addEventDelegate","currentTarget","_selectValue","focusedNode","findOne","addClass","uiFocus","id","getAttribute","_updateSearchWidth","code","length","lastValue","pop","lastLabel","uiKeepFocus","_refreshMulti","includes","focusNode","focusIndex","itemsScrollY","getScrollY","itemsRect","rect","offset","nodeRect","top","setScrollY","bottom","blur","_throttle","_request","_showMore","height","scrollHeight","boxSize","SCROLL_BOX","_loadingScroll","leading","_eventsMulti","_eventsSingle","stop","hasClass","addEventOnce","window","button","parent","index","slice","splice","_setValue","key","children","child","getText","Object","entries","_renderInfo","results","bind","flatMap","filter","sort","_renderResults","load","_debounce","request","Promise","resolve","response","newData","assign","push","_loader","showMore","_error","finally","cancel","lastChild","every","val","lookup","_refreshSingle","tabindex","_unique","_renderMultiSelection","prepend","class","content","_isString","setHTML","_isElement","tag","_renderMenu","_renderToggleMulti","_renderClear","_renderToggleSingle","reference","beforeUpdate","setStyle","width","afterUpdate","BORDER_BOX","attributes","role","dataset","uiAction","_renderGroup","generateId","childList","_renderItem","html","some","otherValue","uiValue","uiActive","autocomplete","ripple","style","closeBtn","closeIcon","hasChildren","type","findIndex","concat","valueChanged","span","display","fontSize","css","whiteSpace","body"],"sources":["../src/js/select-menu.js","../src/js/index.js","../src/js/prototype/api.js","../src/js/prototype/parsers.js","../src/js/prototype/helpers.js","../src/js/prototype/events.js","../src/js/prototype/data.js","../src/js/prototype/render.js"],"sourcesContent":["import $ from '@fr0st/query';\nimport { BaseComponent, Popper } from '@fr0st/ui';\n\n/**\n * SelectMenu Class\n * @class\n */\nexport default class SelectMenu extends BaseComponent {\n    /**\n     * New SelectMenu constructor.\n     * @param {HTMLElement} node The input node.\n     * @param {object} [options] The options to create the SelectMenu with.\n     */\n    constructor(node, options) {\n        super(node, options);\n\n        if (!$.is(this._node, 'select')) {\n            throw new Error('SelectMenu must be created on a select element');\n        }\n\n        this._placeholderText = this._options.placeholder;\n        this._maxSelections = this._options.maxSelections;\n        this._multiple = $.getProperty(this._node, 'multiple');\n\n        this._data = [];\n        this._lookup = {};\n        this._activeItems = [];\n\n        this._getData = null;\n\n        let data;\n        if ($._isFunction(this._options.getResults)) {\n            this._getResultsInit();\n        } else if ($._isPlainObject(this._options.data)) {\n            data = this._getDataFromObject(this._options.data);\n        } else if ($._isArray(this._options.data)) {\n            data = this._options.data;\n        } else {\n            data = this._getDataFromDOM(this._node);\n        }\n\n        if (data) {\n            this._data = this._parseData(data);\n            this._lookup = this._parseDataLookup(data);\n            this._getDataInit();\n        }\n\n        let value;\n        if (this._multiple) {\n            value = [...this._node.selectedOptions].map((option) => $.getValue(option));\n        } else {\n            value = $.getValue(this._node);\n        }\n\n        this._render();\n        this._loadValue(value);\n        this._events();\n    }\n\n    /**\n     * Disable the SelectMenu.\n     */\n    disable() {\n        $.setAttribute(this._node, { disabled: true });\n        this._refreshDisabled();\n    }\n\n    /**\n     * Dispose the SelectMenu.\n     */\n    dispose() {\n        if (this._popper) {\n            this._popper.dispose();\n            this._popper = null;\n        }\n\n        $.removeAttribute(this._node, 'tabindex');\n        $.removeEvent(this._node, 'focus.ui.selectmenu');\n        $.removeClass(this._node, this.constructor.classes.hide);\n        $.remove(this._menuNode);\n        $.remove(this._toggle);\n\n        this._toggle = null;\n        this._clear = null;\n        this._searchInput = null;\n        this._placeholder = null;\n        this._menuNode = null;\n        this._itemsList = null;\n        this._data = null;\n        this._lookup = null;\n        this._activeItems = null;\n        this._value = null;\n        this._requests = null;\n        this._popperOptions = null;\n        this._getData = null;\n\n        super.dispose();\n    }\n\n    /**\n     * Enable the SelectMenu.\n     */\n    enable() {\n        $.removeAttribute(this._node, 'disabled');\n        this._refreshDisabled();\n    }\n\n    /**\n     * Hide the SelectMenu.\n     */\n    hide() {\n        if (\n            !$.isConnected(this._menuNode) ||\n            $.getDataset(this._menuNode, 'uiAnimating') ||\n            !$.triggerOne(this._node, 'hide.ui.selectmenu')\n        ) {\n            return;\n        }\n\n        $.setDataset(this._menuNode, { uiAnimating: 'out' });\n\n        this._refreshPlaceholder();\n        $.setValue(this._searchInput, '');\n\n        $.fadeOut(this._menuNode, {\n            duration: this._options.duration,\n        }).then((_) => {\n            this._popper.dispose();\n            this._popper = null;\n\n            this._activeItems = [];\n            $.empty(this._itemsList);\n            $.detach(this._menuNode);\n            $.removeDataset(this._menuNode, 'uiAnimating');\n            $.setAttribute(this._toggle, {\n                'aria-expanded': false,\n                'aria-activedescendent': '',\n            });\n            $.setAttribute(this._searchInput, { 'aria-activedescendent': '' });\n            $.triggerEvent(this._node, 'hidden.ui.selectmenu');\n        }).catch((_) => {\n            if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n                $.removeDataset(this._menuNode, 'uiAnimating');\n            }\n        });\n    }\n\n    /**\n     * Show the SelectMenu.\n     */\n    show() {\n        if (\n            $.is(this._node, ':disabled') ||\n            $.hasAttribute(this._node, 'readonly') ||\n            $.isConnected(this._menuNode) ||\n            $.getDataset(this._menuNode, 'uiAnimating') ||\n            !$.triggerOne(this._node, 'show.ui.selectmenu')\n        ) {\n            return;\n        }\n\n        const term = $.getValue(this._searchInput);\n        this._getData({ term });\n\n        $.setDataset(this._menuNode, { uiAnimating: 'in' });\n\n        if (this._options.appendTo) {\n            $.append(this._options.appendTo, this._menuNode);\n        } else {\n            $.after(this._toggle, this._menuNode);\n        }\n\n        this._popper = new Popper(this._menuNode, this._popperOptions);\n\n        $.fadeIn(this._menuNode, {\n            duration: this._options.duration,\n        }).then((_) => {\n            $.removeDataset(this._menuNode, 'uiAnimating');\n            $.setAttribute(this._toggle, { 'aria-expanded': true });\n            $.triggerEvent(this._node, 'shown.ui.selectmenu');\n        }).catch((_) => {\n            if ($.getDataset(this._menuNode, 'uiAnimating') === 'in') {\n                $.removeDataset(this._menuNode, 'uiAnimating');\n            }\n        });\n    }\n\n    /**\n     * Toggle the SelectMenu.\n     * @return {SelectMenu} The SelectMenu.\n     */\n    toggle() {\n        return $.isConnected(this._menuNode) ?\n            this.hide() :\n            this.show();\n    }\n\n    /**\n     * Update the SelectMenu position.\n     * @return {SelectMenu} The SelectMenu.\n     */\n    update() {\n        if (this._popper) {\n            this._popper.update();\n        }\n\n        return this;\n    }\n}\n","import $ from '@fr0st/query';\nimport { initComponent } from '@fr0st/ui';\nimport SelectMenu from './select-menu.js';\nimport { data, getMaxSelections, getPlaceholder, getValue, setMaxSelections, setPlaceholder, setValue } from './prototype/api.js';\nimport { _getDataInit, _getResultsInit } from './prototype/data.js';\nimport { _events, _eventsMulti, _eventsSingle } from './prototype/events.js';\nimport { _cloneItem, _findValue, _loadValue, _refresh, _refreshDisabled, _refreshMulti, _refreshPlaceholder, _refreshSingle, _selectValue, _setValue, _updateSearchWidth } from './prototype/helpers.js';\nimport { _buildOption, _getDataFromDOM, _getDataFromObject, _parseData, _parseDataLookup } from './prototype/parsers.js';\nimport { _render, _renderClear, _renderGroup, _renderInfo, _renderItem, _renderMenu, _renderMultiSelection, _renderPlaceholder, _renderResults, _renderToggleMulti, _renderToggleSingle } from './prototype/render.js';\n\ninitComponent('selectmenu', SelectMenu);\n\n// SelectMenu default options\nSelectMenu.defaults = {\n    placeholder: '',\n    lang: {\n        clear: 'Remove selection',\n        error: 'Error loading data.',\n        loading: 'Loading..',\n        maxSelections: 'Selection limit reached.',\n        noResults: 'No results',\n        search: 'Search',\n    },\n    searchInputStyle: 'filled',\n    data: null,\n    getResults: null,\n    renderResult: (data) => data.text,\n    renderSelection: (data) => data.text,\n    sanitize: (input) => $.sanitize(input),\n    isMatch(data, term) {\n        const value = data.text;\n        const escapedTerm = $._escapeRegExp(term);\n        const regExp = new RegExp(escapedTerm, 'i');\n\n        if (regExp.test(value)) {\n            return true;\n        }\n\n        const normalized = value.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n\n        return regExp.test(normalized);\n    },\n    sortResults(a, b, term) {\n        const aLower = a.text.toLowerCase();\n        const bLower = b.text.toLowerCase();\n\n        if (term) {\n            const diff = aLower.indexOf(term) - bLower.indexOf(term);\n\n            if (diff) {\n                return diff;\n            }\n        }\n\n        return aLower.localeCompare(bLower);\n    },\n    maxSelections: 0,\n    minSearch: 0,\n    allowClear: false,\n    closeOnSelect: true,\n    debounce: 250,\n    duration: 100,\n    maxHeight: '250px',\n    appendTo: null,\n    fullWidth: false,\n    placement: 'bottom',\n    position: 'start',\n    fixed: false,\n    spacing: 0,\n    minContact: false,\n};\n\n// Default classes\nSelectMenu.classes = {\n    active: 'active',\n    clear: 'btn-close mx-2 lh-base',\n    disabled: 'disabled',\n    disabledItem: 'disabled',\n    focus: 'focus',\n    group: 'selectmenu-group',\n    groupContainer: 'selectmenu-group-container list-unstyled',\n    hide: 'visually-hidden',\n    info: 'selectmenu-item text-body-secondary',\n    item: 'selectmenu-item',\n    items: 'selectmenu-items list-unstyled',\n    menu: 'selectmenu-menu',\n    multiClear: 'btn',\n    multiClearIcon: 'btn-close pe-none',\n    multiGroup: 'btn-group my-n1',\n    multiItem: 'btn',\n    multiSearchInput: 'selectmenu-multi-input',\n    multiToggle: 'selectmenu-multi d-flex flex-wrap position-relative text-start',\n    placeholder: 'selectmenu-placeholder',\n    readonly: 'readonly',\n    searchContainer: 'form-input',\n    searchInputFilled: 'input-filled',\n    searchInputOutline: 'input-outline',\n    searchInputRipple: 'ripple-line',\n    searchOuter: 'p-1',\n    selectionSingle: 'me-auto',\n    toggle: 'selectmenu-toggle d-flex position-relative justify-content-between text-start',\n};\n\nconst proto = SelectMenu.prototype;\n\nproto.data = data;\nproto.getMaxSelections = getMaxSelections;\nproto.getPlaceholder = getPlaceholder;\nproto.getValue = getValue;\nproto.setMaxSelections = setMaxSelections;\nproto.setPlaceholder = setPlaceholder;\nproto.setValue = setValue;\nproto._buildOption = _buildOption;\nproto._cloneItem = _cloneItem;\nproto._events = _events;\nproto._eventsMulti = _eventsMulti;\nproto._eventsSingle = _eventsSingle;\nproto._findValue = _findValue;\nproto._getDataFromDOM = _getDataFromDOM;\nproto._getDataFromObject = _getDataFromObject;\nproto._getDataInit = _getDataInit;\nproto._getResultsInit = _getResultsInit;\nproto._loadValue = _loadValue;\nproto._parseData = _parseData;\nproto._parseDataLookup = _parseDataLookup;\nproto._refresh = _refresh;\nproto._refreshDisabled = _refreshDisabled;\nproto._refreshMulti = _refreshMulti;\nproto._refreshPlaceholder = _refreshPlaceholder;\nproto._refreshSingle = _refreshSingle;\nproto._render = _render;\nproto._renderClear = _renderClear;\nproto._renderGroup = _renderGroup;\nproto._renderInfo = _renderInfo;\nproto._renderItem = _renderItem;\nproto._renderMenu = _renderMenu;\nproto._renderMultiSelection = _renderMultiSelection;\nproto._renderPlaceholder = _renderPlaceholder;\nproto._renderResults = _renderResults;\nproto._renderToggleMulti = _renderToggleMulti;\nproto._renderToggleSingle = _renderToggleSingle;\nproto._selectValue = _selectValue;\nproto._setValue = _setValue;\nproto._updateSearchWidth = _updateSearchWidth;\n\nexport default SelectMenu;\n","import $ from '@fr0st/query';\n\n/**\n * Get data for the selected value(s).\n * @return {array|object} The selected item(s).\n */\nexport function data() {\n    if (!this._multiple) {\n        return this._cloneItem(this._findValue(this._value));\n    }\n\n    return this._value.map((value) => this._cloneItem(this._findValue(value)));\n};\n\n/**\n * Get the maximum selections.\n * @return {number} The maximum selections.\n */\nexport function getMaxSelections() {\n    return this._maxSelections;\n};\n\n/**\n * Get the placeholder text.\n * @return {string} The placeholder text.\n */\nexport function getPlaceholder() {\n    return this._placeholderText;\n};\n\n/**\n * Get the selected value(s).\n * @return {string|number|array} The selected value(s).\n */\nexport function getValue() {\n    return this._value;\n};\n\n/**\n * Set the maximum selections.\n * @param {number} maxSelections The maximum selections.\n */\nexport function setMaxSelections(maxSelections) {\n    this._maxSelections = maxSelections;\n\n    this.hide();\n    this._refresh();\n};\n\n/**\n * Set the placeholder text.\n * @param {string} placeholder The placeholder text.\n */\nexport function setPlaceholder(placeholder) {\n    this._placeholderText = placeholder;\n\n    $.remove(this._placeholder);\n    this._renderPlaceholder();\n    this._refresh();\n};\n\n/**\n * Set the selected value(s).\n * @param {string|number|array} value The value to set.\n */\nexport function setValue(value) {\n    this._loadValue(value);\n};\n","import $ from '@fr0st/query';\n\n/**\n * Build an option element for an item.\n * @param {object} item The item to use.\n * @return {HTMLElement} The option element.\n */\nexport function _buildOption(item) {\n    return $.create('option', {\n        text: item.text,\n        value: item.value,\n        properties: {\n            selected: true,\n        },\n    });\n};\n\n/**\n * Build a data array from a DOM element.\n * @param {HTMLElement} element The element to parse.\n * @return {array} The parsed data.\n */\nexport function _getDataFromDOM(element) {\n    return $.children(element).map((child) => {\n        const data = $.getDataset(child);\n\n        if ($.is(child, 'option')) {\n            return {\n                text: $.getText(child),\n                value: $.getValue(child),\n                disabled: $.is(child, ':disabled'),\n                ...data,\n            };\n        }\n\n        return {\n            text: $.getAttribute(child, 'label'),\n            children: this._getDataFromDOM(child),\n            ...data,\n        };\n    });\n};\n\n/**\n * Build a data array from an object.\n * @param {object} data The data to parse.\n * @return {array} The parsed data.\n */\nexport function _getDataFromObject(data) {\n    return Object.entries(data)\n        .map(([value, text]) => ({ value, text }));\n};\n\n/**\n * Add option elements to data.\n * @param {array} data The data to parse.\n * @return {array} The parsed data.\n */\nexport function _parseData(data) {\n    for (const item of data) {\n        if ('children' in item && $._isArray(item.children)) {\n            this._parseData(item.children);\n        } else {\n            item.element = this._buildOption(item);\n        }\n    }\n\n    return data;\n};\n\n/**\n * Populate lookup with data.\n * @param {array} data The data to parse.\n * @param {object} [lookup] The lookup.\n * @return {object} The populated lookup.\n */\nexport function _parseDataLookup(data, lookup = {}) {\n    for (const item of data) {\n        if ('children' in item) {\n            this._parseDataLookup(item.children, lookup);\n        } else {\n            const key = item.value;\n            lookup[key] = $._extend({}, item);\n        }\n    }\n\n    return lookup;\n};\n","import $ from '@fr0st/query';\n\n/**\n * Clone data for an item.\n * @param {object} item The item to clone.\n * @return {object} The cloned data.\n */\nexport function _cloneItem(item) {\n    if (!item) {\n        return item;\n    }\n\n    const { element: _, ...data } = item;\n\n    return $._extend({}, data);\n};\n\n/**\n * Retrieve data for a value.\n * @param {string|number} value The value to retrieve data for.\n * @return {object} The data.\n */\nexport function _findValue(value) {\n    if (value in this._lookup) {\n        return this._lookup[value];\n    }\n\n    return null;\n};\n\n/**\n * Set a new value, loading the data if it has not already been loaded.\n * @param {string|number|array} value The value to load.\n */\nexport function _loadValue(value) {\n    if (!value || !this._options.getResults) {\n        this._setValue(value);\n        return;\n    }\n\n    const isLoaded = this._multiple ?\n        value.every((val) => this._findValue(val)) :\n        this._findValue(value);\n\n    if (isLoaded) {\n        this._setValue(value);\n        return;\n    }\n\n    Promise.resolve(this._options.getResults({ value }))\n        .then((response) => {\n            const newData = this._parseData(response.results);\n\n            // update lookup\n            Object.assign(\n                this._lookup,\n                this._parseDataLookup(newData),\n            );\n\n            this._setValue(value);\n        })\n        .catch((_) => { });\n};\n\n/**\n * Refresh the selected value(s).\n */\nexport function _refresh() {\n    if (this._multiple) {\n        this._refreshMulti();\n    } else {\n        this._refreshSingle();\n    }\n};\n\n/**\n * Refresh the toggle disabled class.\n */\nexport function _refreshDisabled() {\n    const element = this._multiple ?\n        this._searchInput :\n        this._toggle;\n    const disabled = $.is(this._node, ':disabled');\n\n    if (disabled) {\n        $.addClass(this._toggle, this.constructor.classes.disabled);\n        $.setAttribute(element, { tabindex: -1 });\n    } else {\n        $.removeClass(this._toggle, this.constructor.classes.disabled);\n        $.removeAttribute(element, 'tabindex');\n    }\n\n    $.setAttribute(this._toggle, { 'aria-disabled': disabled });\n};\n\n/**\n * Refresh the selected value(s) for a multiple SelectMenu.\n */\nexport function _refreshMulti() {\n    if (!this._value) {\n        this._value = [];\n    }\n\n    // check values have been loaded and are not disabled\n    this._value = this._value.filter((value) => {\n        const item = this._findValue(value);\n        return item && !item.disabled;\n    });\n\n    this._value = $._unique(this._value);\n\n    // check max selections\n    if (this._maxSelections && this._value.length > this._maxSelections) {\n        this._value = this._value.slice(0, this._maxSelections);\n    }\n\n    // prevent events from being removed\n    $.detach(this._searchInput);\n\n    $.empty(this._node);\n    $.empty(this._toggle);\n\n    this._refreshDisabled();\n    this._refreshPlaceholder();\n\n    // add values\n    for (const value of this._value) {\n        const item = this._findValue(value);\n        $.append(this._node, item.element);\n\n        const group = this._renderMultiSelection(item);\n        $.append(this._toggle, group);\n    }\n\n    $.append(this._toggle, this._searchInput);\n};\n\n/**\n * Refresh the placeholder.\n */\nexport function _refreshPlaceholder() {\n    const hasValue = this._multiple ?\n        this._value.length > 0 :\n        !!this._value;\n\n    if (hasValue) {\n        $.hide(this._placeholder);\n    } else {\n        $.show(this._placeholder);\n        $.prepend(this._toggle, this._placeholder);\n    }\n};\n\n/**\n * Refresh the selected value for a single SelectMenu.\n */\nexport function _refreshSingle() {\n    // check value has been loaded and is not disabled\n    const item = this._findValue(this._value);\n\n    if (!item || item.disabled) {\n        this._value = null;\n    }\n\n    $.empty(this._node);\n    $.empty(this._toggle);\n\n    this._refreshDisabled();\n    this._refreshPlaceholder();\n\n    if (!this._value) {\n        return;\n    }\n\n    // add value\n\n    $.append(this._node, item.element);\n\n    const element = $.create('div', {\n        class: this.constructor.classes.selectionSingle,\n    });\n\n    $.append(this._toggle, element);\n\n    if (this._options.allowClear) {\n        $.append(this._toggle, this._clear);\n    }\n\n    const data = this._cloneItem(item);\n\n    const content = this._options.renderSelection.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(tag, content)) {\n        $.append(element, content);\n    }\n};\n\n/**\n * Select a value (from DOM event).\n * @param {string|number} value The value to select.\n */\nexport function _selectValue(value) {\n    // check item has been loaded\n    const item = this._findValue(value);\n\n    if (!item) {\n        return;\n    }\n\n    value = item.value;\n\n    // toggle selected values for multiple select\n    if (this._multiple) {\n        const index = this._value.findIndex((otherValue) => otherValue == value);\n        if (index >= 0) {\n            value = this._value.slice();\n            value.splice(index, 1);\n        } else {\n            value = this._value.concat([value]);\n        }\n    }\n\n    this._setValue(value, { triggerEvent: true });\n\n    this._refreshPlaceholder();\n    $.setValue(this._searchInput, '');\n\n    if (this._options.closeOnSelect) {\n        this.hide();\n    } else {\n        this._getData({});\n    }\n\n    if (this._multiple) {\n        $.focus(this._searchInput);\n    } else {\n        $.focus(this._toggle);\n    }\n};\n\n/**\n * Select the selected value(s).\n * @param {string|number|array} value The value to select.\n * @param {object} [options] Options for setting the value(s).\n * @param {Boolean} [options.triggerEvent] Whether to trigger the change event.\n */\nexport function _setValue(value, { triggerEvent = false } = {}) {\n    let valueChanged;\n    if (this._multiple) {\n        valueChanged =\n            !this._value ||\n            value.length !== this._value.length ||\n            value.some((val, index) => val !== this._value[index]);\n    } else {\n        valueChanged = value !== this._value;\n    }\n\n    if (!valueChanged) {\n        return;\n    }\n\n    this._value = value;\n    this._refresh();\n\n    if (triggerEvent) {\n        $.triggerEvent(this._node, 'change.ui.selectmenu');\n    }\n};\n\n/**\n * Update the search input width.\n */\nexport function _updateSearchWidth() {\n    const span = $.create('span', {\n        text: $.getValue(this._searchInput),\n        style: {\n            display: 'inline-block',\n            fontSize: $.css(this._searchInput, 'fontSize'),\n            whiteSpace: 'pre-wrap',\n        },\n    });\n    $.append(document.body, span);\n\n    const width = $.width(span);\n    $.setStyle(this._searchInput, { width: width + 2 });\n    $.remove(span);\n};\n","import $ from '@fr0st/query';\n\n/**\n * Attach events for the SelectMenu.\n */\nexport function _events() {\n    $.addEvent(this._itemsList, 'contextmenu.ui.selectmenu', (e) => {\n        // prevent menu node from showing right click menu\n        e.preventDefault();\n    });\n\n    $.addEvent(this._menuNode, 'mousedown.ui.selectmenu', (e) => {\n        if ($.isSame(this._searchInput, e.target)) {\n            return;\n        }\n\n        // prevent search input from triggering blur event\n        e.preventDefault();\n    });\n\n    $.addEvent(this._menuNode, 'click.ui.selectmenu', (e) => {\n        // prevent menu node from closing modal\n        e.stopPropagation();\n    });\n\n    $.addEvent(this._node, 'focus.ui.selectmenu', (_) => {\n        if (!$.isSame(this._node, document.activeElement)) {\n            return;\n        }\n\n        if (this._multiple) {\n            $.focus(this._searchInput);\n        } else {\n            $.focus(this._toggle);\n        }\n    });\n\n    $.addEventDelegate(this._itemsList, 'mouseup.ui.selectmenu', '[data-ui-action=\"select\"]', (e) => {\n        e.preventDefault();\n\n        const value = $.getDataset(e.currentTarget, 'uiValue');\n        this._selectValue(value);\n    });\n\n    $.addEventDelegate(this._itemsList, 'mouseover.ui.selectmenu', '[data-ui-action=\"select\"]', $.debounce((e) => {\n        const focusedNode = $.findOne('[data-ui-focus]', this._itemsList);\n        $.removeClass(focusedNode, this.constructor.classes.focus);\n        $.removeDataset(focusedNode, 'uiFocus');\n\n        $.addClass(e.currentTarget, this.constructor.classes.focus);\n        $.setDataset(e.currentTarget, { uiFocus: true });\n\n        const id = $.getAttribute(e.currentTarget, 'id');\n        $.setAttribute(this._toggle, { 'aria-activedescendent': id });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': id });\n    }));\n\n    $.addEvent(this._searchInput, 'input.ui.selectmenu', $.debounce((_) => {\n        if (this._multiple) {\n            this._updateSearchWidth();\n        }\n\n\n        if (this._multiple && !$.isConnected(this._menuNode)) {\n            this.show();\n        } else {\n            const term = $.getValue(this._searchInput);\n            this._getData({ term });\n        }\n    }));\n\n    $.addEvent(this._searchInput, 'keydown.ui.selectmenu', (e) => {\n        if (e.code === 'Backspace') {\n            if (this._multiple && this._value.length && !$.getValue(this._searchInput)) {\n                e.preventDefault();\n\n                // remove the last selected item and populate the search input with it's value\n                const lastValue = this._value.pop();\n                const lastItem = this._findValue(lastValue);\n                const lastLabel = lastItem.text;\n\n                $.setDataset(this._searchInput, { uiKeepFocus: true });\n\n                this._refreshMulti();\n                $.setValue(this._searchInput, lastLabel);\n                $.focus(this._searchInput);\n                this._updateSearchWidth();\n\n                // trigger input\n                $.triggerEvent(this._searchInput, 'input.ui.selectmenu');\n            }\n\n            return;\n        }\n\n        if (!['ArrowDown', 'ArrowUp', 'Enter'].includes(e.code)) {\n            return;\n        }\n\n        if (this._multiple && !$.isConnected(this._menuNode)) {\n            this.show();\n            return;\n        }\n\n        const focusedNode = $.findOne('[data-ui-focus]', this._itemsList);\n\n        if (e.code === 'Enter') {\n            // select the focused item\n            if (focusedNode) {\n                const value = $.getDataset(focusedNode, 'uiValue');\n                this._selectValue(value);\n            }\n\n            return;\n        }\n\n        // focus the previous/next item\n\n        let focusNode;\n        if (!focusedNode) {\n            focusNode = this._activeItems[0];\n        } else {\n            let focusIndex = this._activeItems.indexOf(focusedNode);\n\n            switch (e.code) {\n                case 'ArrowDown':\n                    focusIndex++;\n                    break;\n                case 'ArrowUp':\n                    focusIndex--;\n                    break;\n            }\n\n            focusNode = this._activeItems[focusIndex];\n        }\n\n        if (!focusNode) {\n            return;\n        }\n\n        $.removeClass(focusedNode, this.constructor.classes.focus);\n        $.removeDataset(focusedNode, 'uiFocus');\n        $.addClass(focusNode, this.constructor.classes.focus);\n        $.setDataset(focusNode, { uiFocus: true });\n\n        const id = $.getAttribute(focusNode, 'id');\n        $.setAttribute(this._toggle, { 'aria-activedescendent': id });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': id });\n\n        const itemsScrollY = $.getScrollY(this._itemsList);\n        const itemsRect = $.rect(this._itemsList, { offset: true });\n        const nodeRect = $.rect(focusNode, { offset: true });\n\n        if (nodeRect.top < itemsRect.top) {\n            $.setScrollY(this._itemsList, itemsScrollY + nodeRect.top - itemsRect.top);\n        } else if (nodeRect.bottom > itemsRect.bottom) {\n            $.setScrollY(this._itemsList, itemsScrollY + nodeRect.bottom - itemsRect.bottom);\n        }\n    });\n\n    $.addEvent(this._searchInput, 'keyup.ui.selectmenu', (e) => {\n        if (e.code !== 'Escape' || !$.isConnected(this._menuNode)) {\n            return;\n        }\n\n        e.stopPropagation();\n\n        // close the menu\n        this.hide();\n\n        if (this._multiple) {\n            $.blur(this._searchInput);\n            $.focus(this._searchInput);\n        } else {\n            $.focus(this._toggle);\n        }\n    });\n\n    if (this._options.getResults) {\n        // infinite scrolling event\n        $.addEvent(this._itemsList, 'scroll.ui.selectmenu', $._throttle((_) => {\n            if (this._request || !this._showMore) {\n                return;\n            }\n\n            const height = $.height(this._itemsList);\n            const scrollHeight = $.height(this._itemsList, { boxSize: $.SCROLL_BOX });\n            const scrollTop = $.getScrollY(this._itemsList);\n\n            if (scrollTop >= scrollHeight - height - (height / 4)) {\n                const term = $.getValue(this._searchInput);\n                const offset = this._data.length;\n\n                this._loadingScroll = true;\n                this._getData({ term, offset });\n            }\n        }, 250, { leading: false }));\n    }\n\n    if (this._multiple) {\n        this._eventsMulti();\n    } else {\n        this._eventsSingle();\n    }\n};\n\n/**\n * Attach events for a multiple SelectMenu.\n */\nexport function _eventsMulti() {\n    $.addEvent(this._searchInput, 'focus.ui.selectmenu', (_) => {\n        if (!$.isSame(this._searchInput, document.activeElement)) {\n            return;\n        }\n\n        $.hide(this._placeholder);\n        $.detach(this._placeholder);\n        $.addClass(this._toggle, 'focus');\n    });\n\n    $.addEvent(this._searchInput, 'blur.ui.selectmenu', (_) => {\n        if (!$.isConnected(this._searchInput)) {\n            return;\n        }\n\n        if ($.isSame(this._searchInput, document.activeElement)) {\n            return;\n        }\n\n        if ($.getDataset(this._searchInput, 'uiKeepFocus')) {\n            // prevent losing focus when toggle element is focused\n            return;\n        }\n\n        $.removeClass(this._toggle, 'focus');\n\n        if (!$.isConnected(this._menuNode)) {\n            this._refreshPlaceholder();\n            return;\n        }\n\n        if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n            return;\n        }\n\n        $.stop(this._menuNode);\n        $.removeDataset(this._menuNode, 'uiAnimating');\n\n        this.hide();\n    });\n\n    $.addEvent(this._toggle, 'mousedown.ui.selectmenu', (e) => {\n        if ($.is(e.target, '[data-ui-action=\"clear\"]')) {\n            e.preventDefault();\n            return;\n        }\n\n        if ($.hasClass(this._toggle, 'focus')) {\n            // maintain focus when toggle element is already focused\n            $.setDataset(this._searchInput, { uiKeepFocus: true });\n        } else {\n            $.hide(this._placeholder);\n            $.addClass(this._toggle, 'focus');\n        }\n\n        $.addEventOnce(window, 'mouseup.ui.selectmenu', (_) => {\n            $.removeDataset(this._searchInput, 'uiKeepFocus');\n            $.focus(this._searchInput);\n\n            if (!e.button) {\n                this.show();\n            }\n        });\n    });\n\n    $.addEventDelegate(this._toggle, 'click.ui.selectmenu', '[data-ui-action=\"clear\"]', (e) => {\n        if (e.button) {\n            return;\n        }\n\n        // remove selection\n        const element = $.parent(e.currentTarget);\n        const index = $.index(element);\n        const value = this._value.slice();\n        value.splice(index, 1);\n        this._setValue(value, { triggerEvent: true });\n        $.focus(this._searchInput);\n    });\n};\n\n/**\n * Attach events for a single SelectMenu.\n */\nexport function _eventsSingle() {\n    $.addEvent(this._searchInput, 'blur.ui.selectmenu', (_) => {\n        if ($.isSame(this._searchInput, document.activeElement)) {\n            return;\n        }\n\n        if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n            return;\n        }\n\n        $.stop(this._menuNode);\n        $.removeDataset(this._menuNode, 'uiAnimating');\n\n        this.hide();\n    });\n\n    $.addEvent(this._toggle, 'mousedown.ui.selectmenu', (e) => {\n        if ($.is(e.target, '[data-ui-action=\"clear\"]')) {\n            e.preventDefault();\n            return;\n        }\n\n        if (e.button) {\n            return;\n        }\n\n        if ($.isConnected(this._menuNode)) {\n            this.hide();\n        } else {\n            this.show();\n\n            $.addEventOnce(window, 'mouseup.ui.selectmenu', (_) => {\n                // focus search input when mouse is released\n                $.focus(this._searchInput);\n            });\n        }\n    });\n\n    $.addEvent(this._toggle, 'keydown.ui.selectmenu', (e) => {\n        if (!/^.$/u.test(e.key)) {\n            return;\n        }\n\n        this.show();\n        $.focus(this._searchInput);\n    });\n\n    if (this._options.allowClear) {\n        $.addEventDelegate(this._toggle, 'click.ui.selectmenu', '[data-ui-action=\"clear\"]', (e) => {\n            if (e.button) {\n                return;\n            }\n\n            // remove selection\n            this._setValue(null, { triggerEvent: true });\n\n            if ($.isConnected(this._menuNode)) {\n                this.hide();\n            }\n        });\n    }\n};\n","import $ from '@fr0st/query';\n\n/**\n * Initialize preloaded get data.\n */\nexport function _getDataInit() {\n    this._getData = ({ term = null }) => {\n        this._activeItems = [];\n        $.empty(this._itemsList);\n        $.setAttribute(this._toggle, { 'aria-activedescendent': '' });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': '' });\n\n        // check for minimum search length\n        if (this._options.minSearch && (!term || term.length < this._options.minSearch)) {\n            $.hide(this._menuNode);\n            this.update();\n            return;\n        }\n\n        $.show(this._menuNode);\n\n        // check for max selections\n        if (this._multiple && this._maxSelections && this._value.length >= this._maxSelections) {\n            const info = this._renderInfo(this._options.lang.maxSelections);\n            $.append(this._itemsList, info);\n            this.update();\n            return;\n        }\n\n        let results = this._data;\n\n        if (term) {\n            const isMatch = this._options.isMatch.bind(this);\n            const sortResults = this._options.sortResults.bind(this);\n\n            // filter results\n            results = this._data\n                .flatMap((item) => 'children' in item && $._isArray(item.children) ?\n                    item.children :\n                    item,\n                )\n                .map((item) => this._cloneItem(item))\n                .filter((data) => isMatch(data, term))\n                .sort((a, b) => sortResults(a, b, term));\n        }\n\n        this._renderResults(results);\n        this.update();\n    };\n};\n\n/**\n * Initialize get data from callback.\n */\nexport function _getResultsInit() {\n    const load = $._debounce(({ offset, term }) => {\n        const options = { offset };\n\n        if (term) {\n            options.term = term;\n        }\n\n        const request = Promise.resolve(this._options.getResults(options));\n\n        request.then((response) => {\n            const newData = this._parseData(response.results);\n\n            // update lookup\n            Object.assign(\n                this._lookup,\n                this._parseDataLookup(newData),\n            );\n\n            if (this._request !== request) {\n                return;\n            }\n\n            if (!offset) {\n                this._data = newData;\n                $.empty(this._itemsList);\n            } else {\n                this._data.push(...newData);\n                $.detach(this._loader);\n            }\n\n            this._showMore = response.showMore;\n\n            this._renderResults(newData);\n\n            this._request = null;\n        }).catch((_) => {\n            if (this._request !== request) {\n                return;\n            }\n\n            $.detach(this._loader);\n            $.append(this._itemsList, this._error);\n\n            this._request = null;\n        }).finally((_) => {\n            this._loadingScroll = false;\n            this.update();\n        });\n\n        this._request = request;\n    }, this._options.debounce);\n\n    this._getData = ({ offset = 0, term = null }) => {\n        // cancel last request\n        if (this._request && this._request.cancel) {\n            this._request.cancel();\n        }\n\n        this._request = null;\n\n        if (!offset) {\n            this._activeItems = [];\n            $.setAttribute(this._toggle, { 'aria-activedescendent': '' });\n            $.setAttribute(this._searchInput, { 'aria-activedescendent': '' });\n\n            const children = $.children(this._itemsList, (node) => !$.isSame(node, this._loader));\n            $.detach(children);\n        } else {\n            $.detach(this._error);\n        }\n\n        // check for minimum search length\n        if (this._options.minSearch && (!term || term.length < this._options.minSearch)) {\n            $.hide(this._menuNode);\n            this.update();\n            return;\n        }\n\n        $.show(this._menuNode);\n\n        // check for max selections\n        if (this._multiple && this._maxSelections && this._value.length >= this._maxSelections) {\n            const info = this._renderInfo(this._options.lang.maxSelections);\n            $.append(this._itemsList, info);\n            this.update();\n            return;\n        }\n\n        const lastChild = $.child(this._itemsList, ':last-child');\n        if (!lastChild || !$.isSame(lastChild, this._loader)) {\n            $.append(this._itemsList, this._loader);\n        }\n\n        load({ offset, term });\n    };\n};\n","import $ from '@fr0st/query';\nimport { generateId } from '@fr0st/ui';\n\n/**\n * Render the toggle element.\n */\nexport function _render() {\n    this._renderPlaceholder();\n    this._renderMenu();\n\n    if (this._multiple) {\n        this._renderToggleMulti();\n    } else {\n        if (this._options.allowClear) {\n            this._renderClear();\n        }\n\n        this._renderToggleSingle();\n    }\n\n    if (this._options.getResults) {\n        this._loader = this._renderInfo(this._options.lang.loading);\n        this._error = this._renderInfo(this._options.lang.error);\n    }\n\n    this._popperOptions = {\n        reference: this._toggle,\n        placement: this._options.placement,\n        position: this._options.position,\n        fixed: this._options.fixed,\n        spacing: this._options.spacing,\n        minContact: this._options.minContact,\n    };\n\n    if (this._options.fullWidth) {\n        this._popperOptions.beforeUpdate = (node) => {\n            $.setStyle(node, { width: '' });\n        };\n\n        this._popperOptions.afterUpdate = (node, reference) => {\n            const width = $.width(reference, { boxSize: $.BORDER_BOX });\n            $.setStyle(node, 'width', `${width}px`);\n        };\n    }\n\n    if ($.hasAttribute(this._node, 'readonly')) {\n        $.addClass(this._toggle, this.constructor.classes.readonly);\n        $.setAttribute(this._toggle, { 'aria-readonly': true });\n    }\n\n    // hide the input node\n    $.addClass(this._node, this.constructor.classes.hide);\n    $.setAttribute(this._node, { tabindex: -1 });\n\n    $.after(this._node, this._toggle);\n};\n\n/**\n * Render the clear button.\n */\nexport function _renderClear() {\n    this._clear = $.create('span', {\n        class: this.constructor.classes.clear,\n        attributes: {\n            'role': 'button',\n            'aria-label': this._options.lang.clear,\n        },\n        dataset: {\n            uiAction: 'clear',\n        },\n    });\n};\n\n/**\n * Render a group item.\n * @param {object} item The group item to render.\n * @return {HTMLElement} The group.\n */\nexport function _renderGroup(item) {\n    const id = generateId('selectmenu-group');\n\n    const groupContainer = $.create('li', {\n        attributes: {\n            id,\n            'role': 'group',\n            'aria-label': item.text,\n        },\n    });\n\n    const element = $.create('div', {\n        class: this.constructor.classes.group,\n    });\n\n    const data = this._cloneItem(item);\n\n    const content = this._options.renderResult.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(element, content)) {\n        $.append(element, content);\n    }\n\n    $.append(groupContainer, element);\n\n    const childList = $.create('ul', {\n        class: this.constructor.classes.groupContainer,\n        attributes: {\n            role: 'none',\n        },\n    });\n\n    $.append(groupContainer, childList);\n\n    for (const child of item.children) {\n        const element = this._renderItem(child, childList);\n\n        $.append(childList, element);\n    }\n\n    return groupContainer;\n};\n\n/**\n * Render an information item.\n * @param {string} text The text to render.\n * @return {HTMLElement} The information item.\n */\nexport function _renderInfo(text) {\n    const element = $.create('li', {\n        html: this._options.sanitize(text),\n        class: this.constructor.classes.info,\n    });\n\n    return element;\n};\n\n/**\n * Render an item.\n * @param {object} item The item to render.\n * @return {HTMLElement} The item.\n */\nexport function _renderItem(item) {\n    const id = generateId('selectmenu-item');\n\n    const value = item.value;\n    const active = this._multiple ?\n        this._value.some((otherValue) => otherValue == value) :\n        value == this._value;\n\n    const element = $.create('li', {\n        class: this.constructor.classes.item,\n        attributes: {\n            id,\n            'role': 'option',\n            'aria-label': item.text,\n            'aria-selected': active,\n        },\n    });\n\n    if (item.disabled) {\n        $.addClass(element, this.constructor.classes.disabledItem);\n        $.setAttribute(element, { 'aria-disabled': true });\n    } else {\n        this._activeItems.push(element);\n        $.setDataset(element, {\n            uiAction: 'select',\n            uiValue: value,\n        });\n    }\n\n    if (active) {\n        $.addClass(element, this.constructor.classes.active);\n        $.setDataset(element, { uiActive: true });\n    }\n\n    const data = this._cloneItem(item);\n\n    const content = this._options.renderResult.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(element, content)) {\n        $.append(element, content);\n    }\n\n    return element;\n};\n\n/**\n * Render the menu.\n */\nexport function _renderMenu() {\n    this._menuNode = $.create('div', {\n        class: this.constructor.classes.menu,\n    });\n\n    const id = generateId('selectmenu');\n\n    if (!this._multiple) {\n        // add search input for single select menus\n\n        const searchOuter = $.create('div', {\n            class: this.constructor.classes.searchOuter,\n        });\n        $.append(this._menuNode, searchOuter);\n\n        const searchContainer = $.create('div', {\n            class: this.constructor.classes.searchContainer,\n        });\n        $.append(searchOuter, searchContainer);\n\n        this._searchInput = $.create('input', {\n            class: this._options.searchInputStyle === 'filled' ?\n                this.constructor.classes.searchInputFilled :\n                this.constructor.classes.searchInputOutline,\n            attributes: {\n                'role': 'searchbox',\n                'aria-autocomplete': 'list',\n                'aria-controls': id,\n                'aria-activedescendent': '',\n                'aria-label': this._options.lang.search,\n                'autocomplete': 'off',\n            },\n        });\n        $.append(searchContainer, this._searchInput);\n\n        if (this._options.searchInputStyle === 'filled') {\n            const ripple = $.create('div', {\n                class: this.constructor.classes.searchInputRipple,\n            });\n            $.append(searchContainer, ripple);\n        }\n    }\n\n    this._itemsList = $.create('ul', {\n        class: this.constructor.classes.items,\n        style: { maxHeight: this._options.maxHeight },\n        attributes: {\n            id,\n            role: 'listbox',\n        },\n    });\n\n    if (this._multiple) {\n        $.setAttribute(this._itemsList, { 'aria-multiselectable': true });\n    }\n\n    $.append(this._menuNode, this._itemsList);\n};\n\n/**\n * Render a multiple selection item.\n * @param {object} item The item to render.\n * @return {HTMLElement} The selection group.\n */\nexport function _renderMultiSelection(item) {\n    const group = $.create('div', {\n        class: this.constructor.classes.multiGroup,\n    });\n\n    const closeBtn = $.create('div', {\n        class: this.constructor.classes.multiClear,\n        attributes: {\n            'role': 'button',\n            'aria-label': this._options.lang.clear,\n        },\n        dataset: {\n            uiAction: 'clear',\n        },\n    });\n\n    $.append(group, closeBtn);\n\n    const closeIcon = $.create('span', {\n        class: this.constructor.classes.multiClearIcon,\n    });\n\n    $.append(closeBtn, closeIcon);\n\n    const element = $.create('div', {\n        class: this.constructor.classes.multiItem,\n    });\n\n    const data = this._cloneItem(item);\n\n    const content = this._options.renderSelection.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(element, content)) {\n        $.append(element, content);\n    }\n\n    $.append(group, element);\n\n    return group;\n};\n\n/**\n * Render the placeholder.\n */\nexport function _renderPlaceholder() {\n    this._placeholder = $.create('span', {\n        html: this._placeholderText ?\n            this._options.sanitize(this._placeholderText) :\n            '&nbsp;',\n        class: this.constructor.classes.placeholder,\n    });\n};\n\n/**\n * Render results.\n * @param {array} results The results to render.\n */\nexport function _renderResults(results) {\n    for (const item of results) {\n        const element = 'children' in item && $._isArray(item.children) ?\n            this._renderGroup(item) :\n            this._renderItem(item);\n\n        $.append(this._itemsList, element);\n    }\n\n    if (!$.hasChildren(this._itemsList)) {\n        const info = this._renderInfo(this._options.lang.noResults);\n        $.append(this._itemsList, info);\n        this.update();\n        return;\n    }\n\n    const focusedNode = $.findOne('[data-ui-focus]', this._itemsList);\n\n    if (!focusedNode && this._activeItems.length) {\n        const element = this._activeItems[0];\n\n        $.addClass(element, this.constructor.classes.focus);\n        $.setDataset(element, { uiFocus: true });\n\n        const id = $.getAttribute(element, 'id');\n        $.setAttribute(this._toggle, { 'aria-activedescendent': id });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': id });\n    }\n};\n\n/**\n * Render the multiple toggle element.\n */\nexport function _renderToggleMulti() {\n    const id = $.getAttribute(this._itemsList, 'id');\n\n    this._toggle = $.create('div', {\n        class: [\n            $.getAttribute(this._node, 'class') || '',\n            this.constructor.classes.multiToggle,\n        ],\n        attributes: {\n            'role': 'combobox',\n            'aria-haspopup': 'listbox',\n            'aria-expanded': false,\n            'aria-disabled': false,\n            'aria-controls': id,\n            'aria-activedescendent': '',\n        },\n    });\n\n    this._searchInput = $.create('input', {\n        class: this.constructor.classes.multiSearchInput,\n        attributes: {\n            'role': 'searchbox',\n            'aria-autocomplete': 'list',\n            'aria-label': this._options.lang.search,\n            'aria-describedby': id,\n            'aria-activedescendent': '',\n            'autocomplete': 'off',\n        },\n    });\n};\n\n/**\n * Render the single toggle element.\n */\nexport function _renderToggleSingle() {\n    const id = $.getAttribute(this._itemsList, 'id');\n\n    this._toggle = $.create('button', {\n        class: [\n            $.getAttribute(this._node, 'class') || '',\n            this.constructor.classes.toggle,\n        ],\n        attributes: {\n            'type': 'button',\n            'role': 'combobox',\n            'aria-haspopup': 'listbox',\n            'aria-expanded': false,\n            'aria-disabled': false,\n            'aria-controls': id,\n            'aria-activedescendent': '',\n        },\n    });\n};\n"],"mappings":"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"}