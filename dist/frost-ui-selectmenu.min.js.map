{"version":3,"names":["SelectMenu","BaseComponent","constructor","node","options","super","$","is","this","_node","Error","data","value","_placeholderText","_options","placeholder","_maxSelections","maxSelections","_multiple","getProperty","_data","_lookup","_activeItems","_getData","_getResults","_isFunction","getResults","_getResultsCallbackInit","_getResultsInit","_isPlainObject","_getDataFromObject","_isArray","_getDataFromDOM","_parseData","_parseDataLookup","_getDataInit","selectedOptions","map","option","getValue","_render","_loadValue","_events","disable","setAttribute","disabled","_refreshDisabled","dispose","_popper","removeAttribute","removeEvent","removeClass","classes","hide","remove","_menuNode","_toggle","_clear","_searchInput","_placeholder","_itemsList","_value","_requests","_popperOptions","enable","isConnected","getDataset","triggerOne","setDataset","uiAnimating","_refreshPlaceholder","setValue","fadeOut","duration","then","_","empty","detach","removeDataset","triggerEvent","catch","show","hasAttribute","appendTo","append","after","Popper","fadeIn","toggle","update","initComponent","defaults","lang","clear","error","loading","noResults","search","searchInputStyle","getLabel","text","renderResult","renderSelection","sanitize","input","isMatch","term","escapedTerm","_escapeRegExp","regExp","RegExp","test","normalized","normalize","replace","sortResults","a","b","aLower","toLowerCase","bLower","diff","indexOf","localeCompare","minSearch","allowClear","closeOnSelect","debounce","maxHeight","fullWidth","placement","position","fixed","spacing","minContact","active","disabledItem","focus","group","groupContainer","info","item","items","menu","multiClear","multiClearIcon","multiGroup","multiItem","multiSearchInput","multiToggle","readonly","searchContainer","searchInputFilled","searchInputOutline","searchInputRipple","searchOuter","selectionSingle","proto","prototype","_cloneItem","_findValue","getMaxSelections","getPlaceholder","setMaxSelections","_refresh","setPlaceholder","_renderPlaceholder","_buildOption","create","properties","selected","element","_extend","addEvent","e","preventDefault","isSame","target","stopPropagation","addEventDelegate","currentTarget","_selectValue","focusedNode","find","addClass","uiFocus","id","getAttribute","_updateSearchWidth","includes","code","length","lastValue","pop","lastItem","lastData","lastLabel","_refreshMulti","findOne","focusNode","focusIndex","itemsScrollY","getScrollY","itemsRect","rect","offset","nodeRect","top","setScrollY","bottom","blur","_throttle","_request","_showMore","height","scrollHeight","boxSize","SCROLL_BOX","_loadingScroll","leading","_eventsMulti","_eventsSingle","document","activeElement","keepFocus","stop","hasClass","addEventOnce","window","button","parent","index","slice","splice","_setValue","key","children","child","getText","Object","entries","_renderInfo","results","bind","flatMap","filter","sort","_renderResults","load","_debounce","request","response","_loader","_error","finally","cancel","lastChild","Promise","resolve","newData","push","showMore","assign","loadValues","val","lookup","_refreshSingle","tabindex","_unique","_renderMultiSelection","prepend","class","content","_isString","setHTML","_isElement","tag","_renderMenu","_renderToggleMulti","_renderClear","_renderToggleSingle","reference","beforeUpdate","setStyle","width","afterUpdate","BORDER_BOX","attributes","role","dataset","uiAction","_renderGroup","generateId","childList","_renderItem","html","some","otherValue","uiActive","uiValue","autocomplete","ripple","style","closeBtn","closeIcon","type","findIndex","concat","valueChanged","span","display","fontSize","css","whiteSpace","body"],"sources":["../src/js/select-menu.js","../src/js/index.js","../src/js/prototype/api.js","../src/js/prototype/parsers.js","../src/js/prototype/helpers.js","../src/js/prototype/events.js","../src/js/prototype/data.js","../src/js/prototype/render.js"],"sourcesContent":["import $ from '@fr0st/query';\nimport { BaseComponent, Popper } from '@fr0st/ui';\n\n/**\n * SelectMenu Class\n * @class\n */\nexport default class SelectMenu extends BaseComponent {\n    /**\n     * New SelectMenu constructor.\n     * @param {HTMLElement} node The input node.\n     * @param {object} [options] The options to create the SelectMenu with.\n     */\n    constructor(node, options) {\n        super(node, options);\n\n        if (!$.is(this._node, 'select')) {\n            throw new Error('SelectMenu must be created on a select element');\n        }\n\n        this._placeholderText = this._options.placeholder;\n        this._maxSelections = this._options.maxSelections;\n        this._multiple = $.getProperty(this._node, 'multiple');\n\n        this._data = [];\n        this._lookup = {};\n        this._activeItems = [];\n\n        this._getData = null;\n        this._getResults = null;\n\n        let data;\n        if ($._isFunction(this._options.getResults)) {\n            this._getResultsCallbackInit();\n            this._getResultsInit();\n        } else if ($._isPlainObject(this._options.data)) {\n            data = this._getDataFromObject(this._options.data);\n        } else if ($._isArray(this._options.data)) {\n            data = this._options.data;\n        } else {\n            data = this._getDataFromDOM(this._node);\n        }\n\n        if (data) {\n            this._data = this._parseData(data);\n            this._lookup = this._parseDataLookup(data);\n            this._getDataInit();\n        }\n\n        let value;\n        if (this._multiple) {\n            value = [...this._node.selectedOptions].map((option) => $.getValue(option));\n        } else {\n            value = $.getValue(this._node);\n        }\n\n        this._render();\n        this._loadValue(value);\n        this._events();\n    }\n\n    /**\n     * Disable the SelectMenu.\n     */\n    disable() {\n        $.setAttribute(this._node, { disabled: true });\n        this._refreshDisabled();\n    }\n\n    /**\n     * Dispose the SelectMenu.\n     */\n    dispose() {\n        if (this._popper) {\n            this._popper.dispose();\n            this._popper = null;\n        }\n\n        $.removeAttribute(this._node, 'tabindex');\n        $.removeEvent(this._node, 'focus.ui.selectmenu');\n        $.removeClass(this._node, this.constructor.classes.hide);\n        $.remove(this._menuNode);\n        $.remove(this._toggle);\n\n        this._toggle = null;\n        this._clear = null;\n        this._searchInput = null;\n        this._placeholder = null;\n        this._menuNode = null;\n        this._itemsList = null;\n        this._data = null;\n        this._lookup = null;\n        this._activeItems = null;\n        this._value = null;\n        this._requests = null;\n        this._popperOptions = null;\n        this._getData = null;\n        this._getResults = null;\n\n        super.dispose();\n    }\n\n    /**\n     * Enable the SelectMenu.\n     */\n    enable() {\n        $.removeAttribute(this._node, 'disabled');\n        this._refreshDisabled();\n    }\n\n    /**\n     * Hide the SelectMenu.\n     */\n    hide() {\n        if (\n            !$.isConnected(this._menuNode) ||\n            $.getDataset(this._menuNode, 'uiAnimating') ||\n            !$.triggerOne(this._node, 'hide.ui.selectmenu')\n        ) {\n            return;\n        }\n\n        $.setDataset(this._menuNode, { uiAnimating: 'out' });\n\n        this._refreshPlaceholder();\n        $.setValue(this._searchInput, '');\n\n        $.fadeOut(this._menuNode, {\n            duration: this._options.duration,\n        }).then((_) => {\n            this._popper.dispose();\n            this._popper = null;\n\n            this._activeItems = [];\n            $.empty(this._itemsList);\n            $.detach(this._menuNode);\n            $.removeDataset(this._menuNode, 'uiAnimating');\n            $.setAttribute(this._toggle, {\n                'aria-expanded': false,\n                'aria-activedescendent': '',\n            });\n            $.setAttribute(this._searchInput, { 'aria-activedescendent': '' });\n            $.triggerEvent(this._node, 'hidden.ui.selectmenu');\n        }).catch((_) => {\n            if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n                $.removeDataset(this._menuNode, 'uiAnimating');\n            }\n        });\n    }\n\n    /**\n     * Show the SelectMenu.\n     */\n    show() {\n        if (\n            $.is(this._node, ':disabled') ||\n            $.hasAttribute(this._node, 'readonly') ||\n            $.isConnected(this._menuNode) ||\n            $.getDataset(this._menuNode, 'uiAnimating') ||\n            !$.triggerOne(this._node, 'show.ui.selectmenu')\n        ) {\n            return;\n        }\n\n        this._getData({});\n\n        $.setDataset(this._menuNode, { uiAnimating: 'in' });\n\n        if (this._options.appendTo) {\n            $.append(this._options.appendTo, this._menuNode);\n        } else {\n            $.after(this._toggle, this._menuNode);\n        }\n\n        this._popper = new Popper(this._menuNode, this._popperOptions);\n\n        $.fadeIn(this._menuNode, {\n            duration: this._options.duration,\n        }).then((_) => {\n            $.removeDataset(this._menuNode, 'uiAnimating');\n            $.setAttribute(this._toggle, { 'aria-expanded': true });\n            $.triggerEvent(this._node, 'shown.ui.selectmenu');\n        }).catch((_) => {\n            if ($.getDataset(this._menuNode, 'uiAnimating') === 'in') {\n                $.removeDataset(this._menuNode, 'uiAnimating');\n            }\n        });\n    }\n\n    /**\n     * Toggle the SelectMenu.\n     * @return {SelectMenu} The SelectMenu.\n     */\n    toggle() {\n        return $.isConnected(this._menuNode) ?\n            this.hide() :\n            this.show();\n    }\n\n    /**\n     * Update the SelectMenu position.\n     * @return {SelectMenu} The SelectMenu.\n     */\n    update() {\n        if (this._popper) {\n            this._popper.update();\n        }\n\n        return this;\n    }\n}\n","import $ from '@fr0st/query';\nimport { initComponent } from '@fr0st/ui';\nimport SelectMenu from './select-menu.js';\nimport { data, getMaxSelections, getPlaceholder, getValue, setMaxSelections, setPlaceholder, setValue } from './prototype/api.js';\nimport { _getDataInit, _getResultsInit, _getResultsCallbackInit } from './prototype/data.js';\nimport { _events, _eventsMulti, _eventsSingle } from './prototype/events.js';\nimport { _cloneItem, _findValue, _loadValue, _refresh, _refreshDisabled, _refreshMulti, _refreshPlaceholder, _refreshSingle, _selectValue, _setValue, _updateSearchWidth } from './prototype/helpers.js';\nimport { _buildOption, _getDataFromDOM, _getDataFromObject, _parseData, _parseDataLookup } from './prototype/parsers.js';\nimport { _render, _renderClear, _renderGroup, _renderInfo, _renderItem, _renderMenu, _renderMultiSelection, _renderPlaceholder, _renderResults, _renderToggleMulti, _renderToggleSingle } from './prototype/render.js';\n\ninitComponent('selectmenu', SelectMenu);\n\n// SelectMenu default options\nSelectMenu.defaults = {\n    placeholder: '',\n    lang: {\n        clear: 'Remove selection',\n        error: 'Error loading data.',\n        loading: 'Loading..',\n        maxSelections: 'Selection limit reached.',\n        noResults: 'No results',\n        search: 'Search',\n    },\n    searchInputStyle: 'filled',\n    data: null,\n    getResults: null,\n    getLabel: (value) => value.text,\n    getValue: (value) => value.value,\n    renderResult(data) {\n        return this._options.getLabel(data);\n    },\n    renderSelection(data) {\n        return this._options.getLabel(data);\n    },\n    sanitize: (input) => $.sanitize(input),\n    isMatch(data, term) {\n        const value = this._options.getLabel(data);\n        const escapedTerm = $._escapeRegExp(term);\n        const regExp = new RegExp(escapedTerm, 'i');\n\n        if (regExp.test(value)) {\n            return true;\n        }\n\n        const normalized = value.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '');\n\n        return regExp.test(normalized);\n    },\n    sortResults(a, b, term) {\n        const aLower = this._options.getLabel(a).toLowerCase();\n        const bLower = this._options.getLabel(b).toLowerCase();\n\n        if (term) {\n            const diff = aLower.indexOf(term) - bLower.indexOf(term);\n\n            if (diff) {\n                return diff;\n            }\n        }\n\n        return aLower.localeCompare(bLower);\n    },\n    maxSelections: 0,\n    minSearch: 0,\n    allowClear: false,\n    closeOnSelect: true,\n    debounce: 250,\n    duration: 100,\n    maxHeight: '250px',\n    appendTo: null,\n    fullWidth: false,\n    placement: 'bottom',\n    position: 'start',\n    fixed: false,\n    spacing: 0,\n    minContact: false,\n};\n\n// Default classes\nSelectMenu.classes = {\n    active: 'active',\n    clear: 'btn-close mx-2 lh-base',\n    disabled: 'disabled',\n    disabledItem: 'disabled',\n    focus: 'focus',\n    group: 'selectmenu-group',\n    groupContainer: 'selectmenu-group-container list-unstyled',\n    hide: 'visually-hidden',\n    info: 'selectmenu-item text-body-secondary',\n    item: 'selectmenu-item',\n    items: 'selectmenu-items list-unstyled',\n    menu: 'selectmenu-menu shadow-sm',\n    multiClear: 'btn',\n    multiClearIcon: 'btn-close pe-none',\n    multiGroup: 'btn-group my-n1',\n    multiItem: 'btn',\n    multiSearchInput: 'selectmenu-multi-input',\n    multiToggle: 'selectmenu-multi d-flex flex-wrap position-relative text-start',\n    placeholder: 'selectmenu-placeholder',\n    readonly: 'readonly',\n    searchContainer: 'form-input',\n    searchInputFilled: 'input-filled',\n    searchInputOutline: 'input-outline',\n    searchInputRipple: 'ripple-line',\n    searchOuter: 'p-1',\n    selectionSingle: 'me-auto',\n    toggle: 'selectmenu-toggle d-flex position-relative justify-content-between text-start',\n};\n\nconst proto = SelectMenu.prototype;\n\nproto.data = data;\nproto.getMaxSelections = getMaxSelections;\nproto.getPlaceholder = getPlaceholder;\nproto.getValue = getValue;\nproto.setMaxSelections = setMaxSelections;\nproto.setPlaceholder = setPlaceholder;\nproto.setValue = setValue;\nproto._buildOption = _buildOption;\nproto._cloneItem = _cloneItem;\nproto._events = _events;\nproto._eventsMulti = _eventsMulti;\nproto._eventsSingle = _eventsSingle;\nproto._findValue = _findValue;\nproto._getDataFromDOM = _getDataFromDOM;\nproto._getDataFromObject = _getDataFromObject;\nproto._getDataInit = _getDataInit;\nproto._getResultsInit = _getResultsInit;\nproto._getResultsCallbackInit = _getResultsCallbackInit;\nproto._loadValue = _loadValue;\nproto._parseData = _parseData;\nproto._parseDataLookup = _parseDataLookup;\nproto._refresh = _refresh;\nproto._refreshDisabled = _refreshDisabled;\nproto._refreshMulti = _refreshMulti;\nproto._refreshPlaceholder = _refreshPlaceholder;\nproto._refreshSingle = _refreshSingle;\nproto._render = _render;\nproto._renderClear = _renderClear;\nproto._renderGroup = _renderGroup;\nproto._renderInfo = _renderInfo;\nproto._renderItem = _renderItem;\nproto._renderMenu = _renderMenu;\nproto._renderMultiSelection = _renderMultiSelection;\nproto._renderPlaceholder = _renderPlaceholder;\nproto._renderResults = _renderResults;\nproto._renderToggleMulti = _renderToggleMulti;\nproto._renderToggleSingle = _renderToggleSingle;\nproto._selectValue = _selectValue;\nproto._setValue = _setValue;\nproto._updateSearchWidth = _updateSearchWidth;\n\nexport default SelectMenu;\n","import $ from '@fr0st/query';\n\n/**\n * Get data for the selected value(s).\n * @return {array|object} The selected item(s).\n */\nexport function data() {\n    if (!this._multiple) {\n        return this._cloneItem(this._findValue(this._value));\n    }\n\n    return this._value.map((value) => this._cloneItem(this._findValue(value)));\n};\n\n/**\n * Get the maximum selections.\n * @return {number} The maximum selections.\n */\nexport function getMaxSelections() {\n    return this._maxSelections;\n};\n\n/**\n * Get the placeholder text.\n * @return {string} The placeholder text.\n */\nexport function getPlaceholder() {\n    return this._placeholderText;\n};\n\n/**\n * Get the selected value(s).\n * @return {string|number|array} The selected value(s).\n */\nexport function getValue() {\n    return this._value;\n};\n\n/**\n * Set the maximum selections.\n * @param {number} maxSelections The maximum selections.\n */\nexport function setMaxSelections(maxSelections) {\n    this._maxSelections = maxSelections;\n\n    this.hide();\n    this._refresh();\n};\n\n/**\n * Set the placeholder text.\n * @param {string} placeholder The placeholder text.\n */\nexport function setPlaceholder(placeholder) {\n    this._placeholderText = placeholder;\n\n    $.remove(this._placeholder);\n    this._renderPlaceholder();\n    this._refresh();\n};\n\n/**\n * Set the selected value(s).\n * @param {string|number|array} value The value to set.\n */\nexport function setValue(value) {\n    this._loadValue(value);\n};\n","import $ from '@fr0st/query';\r\n\r\n/**\r\n * Build an option element for an item.\r\n * @param {object} item The item to use.\r\n * @return {HTMLElement} The option element.\r\n */\r\nexport function _buildOption(item) {\r\n    return $.create('option', {\r\n        text: this._options.getLabel(item),\r\n        value: this._options.getValue(item),\r\n        properties: {\r\n            selected: true,\r\n        },\r\n    });\r\n};\r\n\r\n/**\r\n * Build a data array from a DOM element.\r\n * @param {HTMLElement} element The element to parse.\r\n * @return {array} The parsed data.\r\n */\r\nexport function _getDataFromDOM(element) {\r\n    return $.children(element).map((child) => {\r\n        const data = $.getDataset(child);\r\n\r\n        if ($.is(child, 'option')) {\r\n            return {\r\n                text: $.getText(child),\r\n                value: $.getValue(child),\r\n                disabled: $.is(child, ':disabled'),\r\n                ...data,\r\n            };\r\n        }\r\n\r\n        return {\r\n            text: $.getAttribute(child, 'label'),\r\n            children: this._getDataFromDOM(child),\r\n            ...data,\r\n        };\r\n    });\r\n};\r\n\r\n/**\r\n * Build a data array from an object.\r\n * @param {object} data The data to parse.\r\n * @return {array} The parsed data.\r\n */\r\nexport function _getDataFromObject(data) {\r\n    return Object.entries(data)\r\n        .map(([value, text]) => ({ value, text }));\r\n};\r\n\r\n/**\r\n * Add option elements to data.\r\n * @param {array} data The data to parse.\r\n * @return {array} The parsed data.\r\n */\r\nexport function _parseData(data) {\r\n    for (const item of data) {\r\n        if ('children' in item && $._isArray(item.children)) {\r\n            this._parseData(item.children);\r\n        } else {\r\n            item.element = this._buildOption(item);\r\n        }\r\n    }\r\n\r\n    return data;\r\n};\r\n\r\n/**\r\n * Populate lookup with data.\r\n * @param {array} data The data to parse.\r\n * @param {object} [lookup] The lookup.\r\n * @return {object} The populated lookup.\r\n */\r\nexport function _parseDataLookup(data, lookup = {}) {\r\n    for (const item of data) {\r\n        if ('children' in item) {\r\n            this._parseDataLookup(item.children, lookup);\r\n        } else {\r\n            const key = this._options.getValue(item);\r\n            lookup[key] = $._extend({}, item);\r\n        }\r\n    }\r\n\r\n    return lookup;\r\n};\r\n","import $ from '@fr0st/query';\n\n/**\n * Clone data for an item.\n * @param {object} item The item to clone.\n * @return {object} The cloned data.\n */\nexport function _cloneItem(item) {\n    if (!item) {\n        return item;\n    }\n\n    const { element: _, ...data } = item;\n\n    return $._extend({}, data);\n};\n\n/**\n * Retrieve data for a value.\n * @param {string|number} value The value to retrieve data for.\n * @return {object} The data.\n */\nexport function _findValue(value) {\n    if (value in this._lookup) {\n        return this._lookup[value];\n    }\n\n    return null;\n};\n\n/**\n * Set a new value, loading the data if it has not already been loaded.\n * @param {string|number|array} value The value to load.\n */\nexport function _loadValue(value) {\n    if (!value || !this._getResults) {\n        this._setValue(value);\n        return;\n    }\n\n    if (!this._multiple) {\n        if (this._findValue(value)) {\n            this._setValue(value);\n            return;\n        }\n\n        this._getResults({ value })\n            .then((_) => this._setValue(value));\n\n        return;\n    }\n\n    const loadValues = value.filter((val) => !this._findValue(val));\n\n    if (!loadValues.length) {\n        this._setValue(value);\n        return;\n    }\n\n    this._getResults({ value: loadValues })\n        .then((_) => this._setValue(value));\n};\n\n/**\n * Refresh the selected value(s).\n */\nexport function _refresh() {\n    if (this._multiple) {\n        this._refreshMulti();\n    } else {\n        this._refreshSingle();\n    }\n};\n\n/**\n * Refresh the toggle disabled class.\n */\nexport function _refreshDisabled() {\n    const element = this._multiple ?\n        this._searchInput :\n        this._toggle;\n    const disabled = $.is(this._node, ':disabled');\n\n    if (disabled) {\n        $.addClass(this._toggle, this.constructor.classes.disabled);\n        $.setAttribute(element, { tabindex: -1 });\n    } else {\n        $.removeClass(this._toggle, this.constructor.classes.disabled);\n        $.removeAttribute(element, 'tabindex');\n    }\n\n    $.setAttribute(this._toggle, { 'aria-disabled': disabled });\n};\n\n/**\n * Refresh the selected value(s) for a multiple SelectMenu.\n */\nexport function _refreshMulti() {\n    if (!this._value) {\n        this._value = [];\n    }\n\n    // check values have been loaded and are not disabled\n    this._value = this._value.filter((value) => {\n        const item = this._findValue(value);\n        return item && !item.disabled;\n    });\n\n    this._value = $._unique(this._value);\n\n    // check max selections\n    if (this._maxSelections && this._value.length > this._maxSelections) {\n        this._value = this._value.slice(0, this._maxSelections);\n    }\n\n    // prevent events from being removed\n    $.detach(this._searchInput);\n\n    $.empty(this._node);\n    $.empty(this._toggle);\n\n    this._refreshDisabled();\n    this._refreshPlaceholder();\n\n    // add values\n    for (const value of this._value) {\n        const item = this._findValue(value);\n        $.append(this._node, item.element);\n\n        const group = this._renderMultiSelection(item);\n        $.append(this._toggle, group);\n    }\n\n    $.append(this._toggle, this._searchInput);\n};\n\n/**\n * Refresh the placeholder.\n */\nexport function _refreshPlaceholder() {\n    const hasValue = this._multiple ?\n        this._value.length > 0 :\n        !!this._value;\n\n    if (hasValue) {\n        $.hide(this._placeholder);\n    } else {\n        $.show(this._placeholder);\n        $.prepend(this._toggle, this._placeholder);\n    }\n};\n\n/**\n * Refresh the selected value for a single SelectMenu.\n */\nexport function _refreshSingle() {\n    // check value has been loaded and is not disabled\n    const item = this._findValue(this._value);\n\n    if (!item || item.disabled) {\n        this._value = null;\n    }\n\n    $.empty(this._node);\n    $.empty(this._toggle);\n\n    this._refreshDisabled();\n    this._refreshPlaceholder();\n\n    if (!this._value) {\n        return;\n    }\n\n    // add value\n\n    $.append(this._node, item.element);\n\n    const data = this._cloneItem(item);\n\n    const element = $.create('div', {\n        class: this.constructor.classes.selectionSingle,\n    });\n\n    $.append(this._toggle, element);\n\n    if (this._options.allowClear) {\n        $.append(this._toggle, this._clear);\n    }\n\n    const content = this._options.renderSelection.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(tag, content)) {\n        $.append(element, content);\n    }\n};\n\n/**\n * Select a value (from DOM event).\n * @param {string|number} value The value to select.\n */\nexport function _selectValue(value) {\n    // check item has been loaded\n    const item = this._findValue(value);\n\n    if (!item) {\n        return;\n    }\n\n    const data = this._cloneItem(item);\n\n    value = this._options.getValue(data);\n\n    // toggle selected values for multiple select\n    if (this._multiple) {\n        const index = this._value.findIndex((otherValue) => otherValue == value);\n        if (index >= 0) {\n            value = this._value.slice();\n            value.splice(index, 1);\n        } else {\n            value = this._value.concat([value]);\n        }\n    }\n\n    this._setValue(value, { triggerEvent: true });\n\n    this._refreshPlaceholder();\n    $.setValue(this._searchInput, '');\n\n    if (this._options.closeOnSelect) {\n        this.hide();\n    } else {\n        this._getData({});\n    }\n\n    if (this._multiple) {\n        $.focus(this._searchInput);\n    } else {\n        $.focus(this._toggle);\n    }\n};\n\n/**\n * Select the selected value(s).\n * @param {string|number|array} value The value to select.\n * @param {object} [options] Options for setting the value(s).\n * @param {Boolean} [options.triggerEvent] Whether to trigger the change event.\n */\nexport function _setValue(value, { triggerEvent = false } = {}) {\n    let valueChanged;\n    if (this._multiple) {\n        valueChanged =\n            !this._value ||\n            value.length !== this._value.length ||\n            value.some((val, index) => val !== this._value[index]);\n    } else {\n        valueChanged = value !== this._value;\n    }\n\n    if (!valueChanged) {\n        return;\n    }\n\n    this._value = value;\n    this._refresh();\n\n    if (triggerEvent) {\n        $.triggerEvent(this._node, 'change.ui.selectmenu');\n    }\n};\n\n/**\n * Update the search input width.\n */\nexport function _updateSearchWidth() {\n    const span = $.create('span', {\n        text: $.getValue(this._searchInput),\n        style: {\n            display: 'inline-block',\n            fontSize: $.css(this._searchInput, 'fontSize'),\n            whiteSpace: 'pre-wrap',\n        },\n    });\n    $.append(document.body, span);\n\n    const width = $.width(span);\n    $.setStyle(this._searchInput, { width: width + 2 });\n    $.remove(span);\n};\n","import $ from '@fr0st/query';\n\n/**\n * Attach events for the SelectMenu.\n */\nexport function _events() {\n    $.addEvent(this._itemsList, 'contextmenu.ui.selectmenu', (e) => {\n        // prevent menu node from showing right click menu\n        e.preventDefault();\n    });\n\n    $.addEvent(this._menuNode, 'mousedown.ui.selectmenu', (e) => {\n        if ($.isSame(this._searchInput, e.target)) {\n            return;\n        }\n\n        // prevent search input from triggering blur event\n        e.preventDefault();\n    });\n\n    $.addEvent(this._menuNode, 'click.ui.selectmenu', (e) => {\n        // prevent menu node from closing modal\n        e.stopPropagation();\n    });\n\n    $.addEvent(this._node, 'focus.ui.selectmenu', (_) => {\n        if (this._multiple) {\n            $.focus(this._searchInput);\n        } else {\n            $.focus(this._toggle);\n        }\n    });\n\n    $.addEventDelegate(this._itemsList, 'mouseup.ui.selectmenu', '[data-ui-action=\"select\"]', (e) => {\n        e.preventDefault();\n\n        const value = $.getDataset(e.currentTarget, 'uiValue');\n        this._selectValue(value);\n    });\n\n    $.addEventDelegate(this._itemsList, 'mouseover.ui.selectmenu', '[data-ui-action=\"select\"]', $.debounce((e) => {\n        const focusedNode = $.find('[data-ui-focus]', this._itemsList);\n        $.removeClass(focusedNode, this.constructor.classes.focus);\n        $.removeDataset(focusedNode, 'uiFocus');\n\n        $.addClass(e.currentTarget, this.constructor.classes.focus);\n        $.setDataset(e.currentTarget, { uiFocus: true });\n\n        const id = $.getAttribute(e.currentTarget, 'id');\n        $.setAttribute(this._toggle, { 'aria-activedescendent': id });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': id });\n    }));\n\n    $.addEvent(this._searchInput, 'input.ui.selectmenu', $.debounce((_) => {\n        if (this._multiple) {\n            this._updateSearchWidth();\n            this.show();\n        }\n\n        const term = $.getValue(this._searchInput);\n        this._getData({ term });\n    }));\n\n    $.addEvent(this._searchInput, 'keydown.ui.selectmenu', (e) => {\n        if (!['ArrowDown', 'ArrowUp', 'Backspace', 'Enter'].includes(e.code)) {\n            return;\n        }\n\n        if (e.code === 'Backspace') {\n            if (this._multiple && this._value.length && !$.getValue(this._searchInput)) {\n                e.preventDefault();\n\n                // remove the last selected item and populate the search input with it's value\n                const lastValue = this._value.pop();\n                const lastItem = this._findValue(lastValue);\n                const { element: _, ...lastData } = lastItem;\n                const lastLabel = this._options.getLabel(lastData);\n\n                this._refreshMulti();\n                $.setValue(this._searchInput, lastLabel);\n                $.focus(this._searchInput);\n                this._updateSearchWidth();\n\n                // trigger input\n                $.triggerEvent(this._searchInput, 'input.ui.selectmenu');\n            }\n\n            return;\n        }\n\n        if (this._multiple && !$.isConnected(this._menuNode) && ['ArrowDown', 'ArrowUp', 'Enter'].includes(e.code)) {\n            return this.show();\n        }\n\n        const focusedNode = $.findOne('[data-ui-focus]', this._itemsList);\n\n        if (e.code === 'Enter') {\n            // select the focused item\n            if (focusedNode) {\n                const value = $.getDataset(focusedNode, 'uiValue');\n                this._selectValue(value);\n            }\n\n            return;\n        }\n\n        // focus the previous/next item\n\n        let focusNode;\n        if (!focusedNode) {\n            focusNode = this._activeItems[0];\n        } else {\n            let focusIndex = this._activeItems.indexOf(focusedNode);\n\n            switch (e.code) {\n                case 'ArrowDown':\n                    focusIndex++;\n                    break;\n                case 'ArrowUp':\n                    focusIndex--;\n                    break;\n            }\n\n            focusNode = this._activeItems[focusIndex];\n        }\n\n        if (!focusNode) {\n            return;\n        }\n\n        $.removeClass(focusedNode, this.constructor.classes.focus);\n        $.removeDataset(focusedNode, 'uiFocus');\n        $.addClass(focusNode, this.constructor.classes.focus);\n        $.setDataset(focusNode, { uiFocus: true });\n\n        const id = $.getAttribute(focusNode, 'id');\n        $.setAttribute(this._toggle, { 'aria-activedescendent': id });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': id });\n\n        const itemsScrollY = $.getScrollY(this._itemsList);\n        const itemsRect = $.rect(this._itemsList, { offset: true });\n        const nodeRect = $.rect(focusNode, { offset: true });\n\n        if (nodeRect.top < itemsRect.top) {\n            $.setScrollY(this._itemsList, itemsScrollY + nodeRect.top - itemsRect.top);\n        } else if (nodeRect.bottom > itemsRect.bottom) {\n            $.setScrollY(this._itemsList, itemsScrollY + nodeRect.bottom - itemsRect.bottom);\n        }\n    });\n\n    $.addEvent(this._searchInput, 'keyup.ui.selectmenu', (e) => {\n        if (e.code !== 'Escape' || !$.isConnected(this._menuNode)) {\n            return;\n        }\n\n        e.stopPropagation();\n\n        // close the menu\n        this.hide();\n\n        if (this._multiple) {\n            $.blur(this._searchInput);\n            $.focus(this._searchInput);\n        } else {\n            $.focus(this._toggle);\n        }\n    });\n\n    if (this._options.getResults) {\n        // infinite scrolling event\n        $.addEvent(this._itemsList, 'scroll.ui.selectmenu', $._throttle((_) => {\n            if (this._request || !this._showMore) {\n                return;\n            }\n\n            const height = $.height(this._itemsList);\n            const scrollHeight = $.height(this._itemsList, { boxSize: $.SCROLL_BOX });\n            const scrollTop = $.getScrollY(this._itemsList);\n\n            if (scrollTop >= scrollHeight - height - (height / 4)) {\n                const term = $.getValue(this._searchInput);\n                const offset = this._data.length;\n\n                this._loadingScroll = true;\n                this._getData({ term, offset });\n            }\n        }, 250, { leading: false }));\n    }\n\n    if (this._multiple) {\n        this._eventsMulti();\n    } else {\n        this._eventsSingle();\n    }\n};\n\n/**\n * Attach events for a multiple SelectMenu.\n */\nexport function _eventsMulti() {\n    $.addEvent(this._searchInput, 'focus.ui.selectmenu', (_) => {\n        if (!$.isSame(this._searchInput, document.activeElement)) {\n            return;\n        }\n\n        $.hide(this._placeholder);\n        $.detach(this._placeholder);\n        $.addClass(this._toggle, 'focus');\n    });\n\n    let keepFocus = false;\n    $.addEvent(this._searchInput, 'blur.ui.selectmenu', (_) => {\n        if ($.isSame(this._searchInput, document.activeElement)) {\n            return;\n        }\n\n        if (keepFocus) {\n            // prevent losing focus when toggle element is focused\n            return;\n        }\n\n        $.removeClass(this._toggle, 'focus');\n\n        if (!$.isConnected(this._menuNode)) {\n            this._refreshPlaceholder();\n            return;\n        }\n\n        if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n            return;\n        }\n\n        $.stop(this._menuNode);\n        $.removeDataset(this._menuNode, 'uiAnimating');\n\n        this.hide();\n    });\n\n    $.addEvent(this._toggle, 'mousedown.ui.selectmenu', (e) => {\n        if ($.is(e.target, '[data-ui-action=\"clear\"]')) {\n            e.preventDefault();\n            return;\n        }\n\n        if ($.hasClass(this._toggle, 'focus')) {\n            // maintain focus when toggle element is already focused\n            keepFocus = true;\n        } else {\n            $.hide(this._placeholder);\n            $.addClass(this._toggle, 'focus');\n        }\n\n        $.addEventOnce(window, 'mouseup.ui.selectmenu', (_) => {\n            keepFocus = false;\n            $.focus(this._searchInput);\n\n            if (!e.button) {\n                this.show();\n            }\n        });\n    });\n\n    $.addEventDelegate(this._toggle, 'click.ui.selectmenu', '[data-ui-action=\"clear\"]', (e) => {\n        if (e.button) {\n            return;\n        }\n\n        // remove selection\n        const element = $.parent(e.currentTarget);\n        const index = $.index(element);\n        const value = this._value.slice();\n        value.splice(index, 1);\n        this._setValue(value, { triggerEvent: true });\n        $.focus(this._searchInput);\n    });\n};\n\n/**\n * Attach events for a single SelectMenu.\n */\nexport function _eventsSingle() {\n    $.addEvent(this._searchInput, 'blur.ui.selectmenu', (_) => {\n        if ($.isSame(this._searchInput, document.activeElement)) {\n            return;\n        }\n\n        if ($.getDataset(this._menuNode, 'uiAnimating') === 'out') {\n            return;\n        }\n\n        $.stop(this._menuNode);\n        $.removeDataset(this._menuNode, 'uiAnimating');\n\n        this.hide();\n    });\n\n    $.addEvent(this._toggle, 'mousedown.ui.selectmenu', (e) => {\n        if ($.is(e.target, '[data-ui-action=\"clear\"]')) {\n            e.preventDefault();\n            return;\n        }\n\n        if (e.button) {\n            return;\n        }\n\n        if ($.isConnected(this._menuNode)) {\n            this.hide();\n        } else {\n            this.show();\n\n            $.addEventOnce(window, 'mouseup.ui.selectmenu', (_) => {\n                // focus search input when mouse is released\n                $.focus(this._searchInput);\n            });\n        }\n    });\n\n    $.addEvent(this._toggle, 'keydown.ui.selectmenu', (e) => {\n        if (!/^.$/u.test(e.key)) {\n            return;\n        }\n\n        this.show();\n        $.focus(this._searchInput);\n    });\n\n    if (this._options.allowClear) {\n        $.addEventDelegate(this._toggle, 'click.ui.selectmenu', '[data-ui-action=\"clear\"]', (e) => {\n            if (e.button) {\n                return;\n            }\n\n            // remove selection\n            this._setValue(null, { triggerEvent: true });\n\n            if ($.isConnected(this._menuNode)) {\n                this.hide();\n            }\n        });\n    }\n};\n","import $ from '@fr0st/query';\n\n/**\n * Initialize preloaded get data.\n */\nexport function _getDataInit() {\n    this._getData = ({ term = null }) => {\n        this._activeItems = [];\n        $.empty(this._itemsList);\n        $.setAttribute(this._toggle, { 'aria-activedescendent': '' });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': '' });\n\n        // check for minimum search length\n        if (this._options.minSearch && (!term || term.length < this._options.minSearch)) {\n            this.update();\n            return;\n        }\n\n        // check for max selections\n        if (this._multiple && this._maxSelections && this._value.length >= this._maxSelections) {\n            const info = this._renderInfo(this._options.lang.maxSelections);\n            $.append(this._itemsList, info);\n            this.update();\n            return;\n        }\n\n        let results = this._data;\n\n        if (term) {\n            const isMatch = this._options.isMatch.bind(this);\n            const sortResults = this._options.sortResults.bind(this);\n\n            // filter results\n            results = this._data\n                .flatMap((item) => 'children' in item && $._isArray(item.children) ?\n                    item.children :\n                    item,\n                )\n                .map((item) => this._cloneItem(item))\n                .filter((data) => isMatch(data, term))\n                .sort((a, b) => sortResults(a, b, term));\n        }\n\n        this._renderResults(results);\n        this.update();\n    };\n};\n\n/**\n * Initialize get data callback.\n */\nexport function _getResultsCallbackInit() {\n    this._getResults = (options) => {\n        // reset data for starting offset\n        if (!options.offset) {\n            this._data = [];\n        }\n\n        const request = Promise.resolve(this._options.getResults(options));\n\n        request.then((response) => {\n            const newData = this._parseData(response.results);\n            this._data.push(...newData);\n            this._showMore = response.showMore;\n\n            // update lookup\n            Object.assign(\n                this._lookup,\n                this._parseDataLookup(this._data),\n            );\n\n            return response;\n        }).catch((_) => { });\n\n        return request;\n    };\n};\n\n/**\n * Initialize get data from callback.\n */\nexport function _getResultsInit() {\n    const load = $._debounce(({ offset, term }) => {\n        const options = { offset };\n\n        if (term) {\n            options.term = term;\n        }\n\n        const request = this._getResults(options);\n\n        request.then((response) => {\n            if (this._request !== request) {\n                return;\n            }\n\n            if (!offset) {\n                $.empty(this._itemsList);\n            } else {\n                $.detach(this._loader);\n            }\n\n            this._renderResults(response.results);\n\n            this._request = null;\n        }).catch((_) => {\n            if (this._request !== request) {\n                return;\n            }\n\n            $.detach(this._loader);\n            $.append(this._itemsList, this._error);\n\n            this._request = null;\n        }).finally((_) => {\n            this._loadingScroll = false;\n            this.update();\n        });\n\n        this._request = request;\n    }, this._options.debounce);\n\n    this._getData = ({ offset = 0, term = null }) => {\n        // cancel last request\n        if (this._request && this._request.cancel) {\n            this._request.cancel();\n        }\n\n        this._request = null;\n\n        if (!offset) {\n            this._activeItems = [];\n            $.setAttribute(this._toggle, { 'aria-activedescendent': '' });\n            $.setAttribute(this._searchInput, { 'aria-activedescendent': '' });\n\n            const children = $.children(this._itemsList, (node) => !$.isSame(node, this._loader));\n            $.detach(children);\n        } else {\n            $.detach(this._error);\n        }\n\n        // check for minimum search length\n        if (this._options.minSearch && (!term || term.length < this._options.minSearch)) {\n            $.hide(this._menuNode);\n            this.update();\n            return;\n        }\n\n        // check for max selections\n        if (this._multiple && this._maxSelections && this._value.length >= this._maxSelections) {\n            const info = this._renderInfo(this._options.lang.maxSelections);\n            $.append(this._itemsList, info);\n            this.update();\n            return;\n        }\n\n        const lastChild = $.child(this._itemsList, ':last-child');\n        if (!lastChild || !$.isSame(lastChild, this._loader)) {\n            $.append(this._itemsList, this._loader);\n        }\n\n        load({ offset, term });\n    };\n};\n","import $ from '@fr0st/query';\nimport { generateId } from '@fr0st/ui';\n\n/**\n * Render the toggle element.\n */\nexport function _render() {\n    this._renderPlaceholder();\n    this._renderMenu();\n\n    if (this._multiple) {\n        this._renderToggleMulti();\n    } else {\n        if (this._options.allowClear) {\n            this._renderClear();\n        }\n\n        this._renderToggleSingle();\n    }\n\n    if (this._options.getResults) {\n        this._loader = this._renderInfo(this._options.lang.loading);\n        this._error = this._renderInfo(this._options.lang.error);\n    }\n\n    this._popperOptions = {\n        reference: this._toggle,\n        placement: this._options.placement,\n        position: this._options.position,\n        fixed: this._options.fixed,\n        spacing: this._options.spacing,\n        minContact: this._options.minContact,\n    };\n\n    if (this._options.fullWidth) {\n        this._popperOptions.beforeUpdate = (node) => {\n            $.setStyle(node, { width: '' });\n        };\n\n        this._popperOptions.afterUpdate = (node, reference) => {\n            const width = $.width(reference, { boxSize: $.BORDER_BOX });\n            $.setStyle(node, 'width', width);\n        };\n    }\n\n    if ($.hasAttribute(this._node, 'readonly')) {\n        $.addClass(this._toggle, this.constructor.classes.readonly);\n        $.setAttribute(this._toggle, { 'aria-readonly': true });\n    }\n\n    // hide the input node\n    $.addClass(this._node, this.constructor.classes.hide);\n    $.setAttribute(this._node, { tabindex: -1 });\n\n    $.after(this._node, this._toggle);\n};\n\n/**\n * Render the clear button.\n */\nexport function _renderClear() {\n    this._clear = $.create('span', {\n        class: this.constructor.classes.clear,\n        attributes: {\n            'role': 'button',\n            'aria-label': this._options.lang.clear,\n        },\n        dataset: {\n            uiAction: 'clear',\n        },\n    });\n};\n\n/**\n * Render a group item.\n * @param {object} item The group item to render.\n * @return {HTMLElement} The group.\n */\nexport function _renderGroup(item) {\n    const id = generateId('selectmenu-group');\n\n    const data = this._cloneItem(item);\n\n    const groupContainer = $.create('li', {\n        attributes: {\n            id,\n            'role': 'group',\n            'aria-label': this._options.getLabel(data),\n        },\n    });\n\n    const element = $.create('div', {\n        class: this.constructor.classes.group,\n    });\n\n    const content = this._options.renderResult.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(element, content)) {\n        $.append(element, content);\n    }\n\n    $.append(groupContainer, element);\n\n    const childList = $.create('ul', {\n        class: this.constructor.classes.groupContainer,\n        attributes: {\n            role: 'none',\n        }\n    });\n\n    $.append(groupContainer, childList);\n\n    for (const item of data.children) {\n        const element = this._renderItem(item, childList);\n\n        $.append(childList, element);\n    }\n\n    return groupContainer;\n};\n\n/**\n * Render an information item.\n * @param {string} text The text to render.\n * @return {HTMLElement} The information item.\n */\nexport function _renderInfo(text) {\n    const element = $.create('li', {\n        html: this._options.sanitize(text),\n        class: this.constructor.classes.info,\n    });\n\n    return element;\n};\n\n/**\n * Render an item.\n * @param {object} item The item to render.\n * @return {HTMLElement} The item.\n */\nexport function _renderItem(item) {\n    const id = generateId('selectmenu-item');\n\n    const data = this._cloneItem(item);\n\n    const value = this._options.getValue(data);\n    const active = this._multiple ?\n        this._value.some((otherValue) => otherValue == value) :\n        value == this._value;\n\n    const element = $.create('li', {\n        class: this.constructor.classes.item,\n        attributes: {\n            id,\n            'role': 'option',\n            'aria-label': this._options.getLabel(item),\n            'aria-selected': active,\n        },\n    });\n\n    if (active) {\n        $.addClass(element, this.constructor.classes.active);\n        $.setDataset(element, { uiActive: true });\n    }\n\n    if (item.disabled) {\n        $.addClass(element, this.constructor.classes.disabledItem);\n        $.setAttribute(element, { 'aria-disabled': true });\n    } else {\n        this._activeItems.push(element);\n        $.setDataset(element, {\n            uiAction: 'select',\n            uiValue: value,\n        });\n    }\n\n    const content = this._options.renderResult.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(element, content)) {\n        $.append(element, content);\n    }\n\n    return element;\n};\n\n/**\n * Render the menu.\n */\nexport function _renderMenu() {\n    this._menuNode = $.create('div', {\n        class: this.constructor.classes.menu,\n    });\n\n    const id = generateId('selectmenu');\n\n    if (!this._multiple) {\n        // add search input for single select menus\n\n        const searchOuter = $.create('div', {\n            class: this.constructor.classes.searchOuter,\n        });\n        $.append(this._menuNode, searchOuter);\n\n        const searchContainer = $.create('div', {\n            class: this.constructor.classes.searchContainer,\n        });\n        $.append(searchOuter, searchContainer);\n\n        this._searchInput = $.create('input', {\n            class: this._options.searchInputStyle === 'filled' ?\n                this.constructor.classes.searchInputFilled :\n                this.constructor.classes.searchInputOutline,\n            attributes: {\n                'role': 'searchbox',\n                'aria-autocomplete': 'list',\n                'aria-controls': id,\n                'aria-activedescendent': '',\n                'aria-label': this._options.lang.search,\n                'autocomplete': 'off',\n            },\n        });\n        $.append(searchContainer, this._searchInput);\n\n        if (this._options.searchInputStyle === 'filled') {\n            const ripple = $.create('div', {\n                class: this.constructor.classes.searchInputRipple,\n            });\n            $.append(searchContainer, ripple);\n        }\n    }\n\n    this._itemsList = $.create('ul', {\n        class: this.constructor.classes.items,\n        style: { maxHeight: this._options.maxHeight },\n        attributes: {\n            id,\n            role: 'listbox',\n        },\n    });\n\n    if (this._multiple) {\n        $.setAttribute(this._itemsList, { 'aria-multiselectable': true });\n    }\n\n    $.append(this._menuNode, this._itemsList);\n};\n\n/**\n * Render a multiple selection item.\n * @param {object} item The item to render.\n * @return {HTMLElement} The selection group.\n */\nexport function _renderMultiSelection(item) {\n    const group = $.create('div', {\n        class: this.constructor.classes.multiGroup,\n    });\n\n    const closeBtn = $.create('div', {\n        class: this.constructor.classes.multiClear,\n        attributes: {\n            'role': 'button',\n            'aria-label': this._options.lang.clear,\n        },\n        dataset: {\n            uiAction: 'clear',\n        },\n    });\n\n    $.append(group, closeBtn);\n\n    const closeIcon = $.create('span', {\n        class: this.constructor.classes.multiClearIcon,\n    });\n\n    $.append(closeBtn, closeIcon);\n\n    const data = this._cloneItem(item);\n\n    const element = $.create('div', {\n        class: this.constructor.classes.multiItem,\n    });\n\n    const content = this._options.renderSelection.bind(this)(data, element);\n\n    if ($._isString(content)) {\n        $.setHTML(element, this._options.sanitize(content));\n    } else if ($._isElement(content) && !$.isSame(element, content)) {\n        $.append(element, content);\n    }\n\n    $.append(group, element);\n\n    return group;\n};\n\n/**\n * Render the placeholder.\n */\nexport function _renderPlaceholder() {\n    this._placeholder = $.create('span', {\n        html: this._placeholderText ?\n            this._options.sanitize(this._placeholderText) :\n            '&nbsp;',\n        class: this.constructor.classes.placeholder,\n    });\n};\n\n/**\n * Render results.\n * @param {array} results The results to render.\n */\nexport function _renderResults(results) {\n    if (!results.length) {\n        const info = this._renderInfo(this._options.lang.noResults);\n        $.append(this._itemsList, info);\n        this.update();\n        return;\n    }\n\n    for (const item of results) {\n        const element = 'children' in item && $._isArray(item.children) ?\n            this._renderGroup(item) :\n            this._renderItem(item);\n\n        $.append(this._itemsList, element);\n    }\n\n    const focusedNode = $.findOne('[data-ui-focus]', this._itemsList);\n\n    if (focusedNode) {\n        return;\n    }\n\n    let focusNode = $.findOne('[data-ui-active]', this._itemsList);\n\n    if (!focusNode) {\n        focusNode = $.findOne('[data-ui-action=\"select\"]', this._itemsList);\n    }\n\n    if (focusNode) {\n        $.addClass(focusNode, this.constructor.classes.focus);\n        $.setDataset(focusNode, { uiFocus: true });\n\n        const id = $.getAttribute(focusNode, 'id');\n        $.setAttribute(this._toggle, { 'aria-activedescendent': id });\n        $.setAttribute(this._searchInput, { 'aria-activedescendent': id });\n    }\n};\n\n/**\n * Render the multiple toggle element.\n */\nexport function _renderToggleMulti() {\n    const id = $.getAttribute(this._itemsList, 'id');\n\n    this._toggle = $.create('div', {\n        class: [\n            $.getAttribute(this._node, 'class') || '',\n            this.constructor.classes.multiToggle,\n        ],\n        attributes: {\n            'role': 'combobox',\n            'aria-haspopup': 'listbox',\n            'aria-expanded': false,\n            'aria-disabled': false,\n            'aria-controls': id,\n            'aria-activedescendent': '',\n        },\n    });\n\n    this._searchInput = $.create('input', {\n        class: this.constructor.classes.multiSearchInput,\n        attributes: {\n            'role': 'searchbox',\n            'aria-autocomplete': 'list',\n            'aria-label': this._options.lang.search,\n            'aria-describedby': id,\n            'aria-activedescendent': '',\n            'autocomplete': 'off',\n        },\n    });\n};\n\n/**\n * Render the single toggle element.\n */\nexport function _renderToggleSingle() {\n    const id = $.getAttribute(this._itemsList, 'id');\n\n    this._toggle = $.create('button', {\n        class: [\n            $.getAttribute(this._node, 'class') || '',\n            this.constructor.classes.toggle,\n        ],\n        attributes: {\n            'type': 'button',\n            'role': 'combobox',\n            'aria-haspopup': 'listbox',\n            'aria-expanded': false,\n            'aria-disabled': false,\n            'aria-controls': id,\n            'aria-activedescendent': '',\n        },\n    });\n};\n"],"mappings":"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"}